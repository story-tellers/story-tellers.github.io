<!DOCTYPE html><html><head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="style.css">
	<title>Flourish template: Horserace chart</title></head>
	<body>
	

<script>window.Flourish = {"static_prefix":"https://public.flourish.studio/template/195/v15/static","environment":"live"};</script><script>!function(t){"use strict";function e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===za&&e.documentElement.namespaceURI===za?e.createElement(t):e.createElementNS(n,t)}}function n(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function r(){}function i(){return[]}function a(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function o(t,e,n,r,i,o){for(var c,s=0,u=e.length,l=o.length;s<l;++s)(c=e[s])?(c.__data__=o[s],r[s]=c):n[s]=new a(t,o[s]);for(;s<u;++s)(c=e[s])&&(i[s]=c)}function c(t,e,n,r,i,o,c){var s,u,l,f={},h=e.length,d=o.length,_=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(_[s]=l=$a+c.call(u,u.__data__,s,e),l in f?i[s]=u:f[l]=u);for(s=0;s<d;++s)l=$a+c.call(t,o[s],s,o),(u=f[l])?(r[s]=u,u.__data__=o[s],f[l]=null):n[s]=new a(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&f[_[s]]===u&&(i[s]=u)}function s(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function u(t){return function(){this.removeAttribute(t)}}function l(t){return function(){this.removeAttributeNS(t.space,t.local)}}function f(t,e){return function(){this.setAttribute(t,e)}}function h(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function d(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function _(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function p(t){return function(){this.style.removeProperty(t)}}function b(t,e,n){return function(){this.style.setProperty(t,e,n)}}function g(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function y(t,e){return t.style.getPropertyValue(e)||oo(t).getComputedStyle(t,null).getPropertyValue(e)}function m(t){return function(){delete this[t]}}function v(t,e){return function(){this[t]=e}}function x(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function w(t){return t.trim().split(/^|\s+/)}function M(t){return t.classList||new k(t)}function k(t){this._node=t,this._names=w(t.getAttribute("class")||"")}function T(t,e){for(var n=M(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function A(t,e){for(var n=M(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function C(t){return function(){T(this,t)}}function N(t){return function(){A(this,t)}}function S(t,e){return function(){(e.apply(this,arguments)?T:A)(this,t)}}function E(){this.textContent=""}function z(t){return function(){this.textContent=t}}function F(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function D(){this.innerHTML=""}function L(t){return function(){this.innerHTML=t}}function U(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function P(){this.nextSibling&&this.parentNode.appendChild(this)}function O(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B(){return null}function H(){var t=this.parentNode;t&&t.removeChild(this)}function R(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Y(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function q(t,e,n){return t=j(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function j(t,e,n){return function(r){var i=xo;xo=r;try{t.call(this,this.__data__,e,n)}finally{xo=i}}}function X(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function I(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function V(t,e,n){var r=vo.hasOwnProperty(t.type)?q:j;return function(i,a,o){var c,s=this.__on,u=r(e,a,o);if(s)for(var l=0,f=s.length;l<f;++l)if((c=s[l]).type===t.type&&c.name===t.name)return this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=u,c.capture=n),void(c.value=e);this.addEventListener(t.type,u,n),c={type:t.type,name:t.name,value:e,listener:u,capture:n},s?s.push(c):this.__on=[c]}}function $(t,e,n){var r=oo(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function W(t,e){return function(){return $(this,t,e)}}function Z(t,e){return function(){return $(this,t,e.apply(this,arguments))}}function Q(t,e){this._groups=t,this._parents=e}function J(){return new Q([[document.documentElement]],ko)}function G(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new K(r)}function K(t){this._=t}function tt(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function et(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function nt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Eo,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function rt(){return Bo||(Yo(it),Bo=Ro.now()+Ho)}function it(){Bo=0}function at(){this._call=this._time=this._next=null}function ot(t,e,n){var r=new at;return r.restart(t,e,n),r}function ct(){rt(),++Do;for(var t,e=zo;e;)(t=Bo-e._time)>=0&&e._call.call(null,t),e=e._next;--Do}function st(){Bo=(Oo=Ro.now())+Ho,Do=Lo=0;try{ct()}finally{Do=0,lt(),Bo=0}}function ut(){var t=Ro.now(),e=t-Oo;e>Po&&(Ho-=e,Oo=t)}function lt(){for(var t,e,n=zo,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:zo=e);Fo=t,ft(r)}function ft(t){if(!Do){Lo&&(Lo=clearTimeout(Lo));t-Bo>24?(t<1/0&&(Lo=setTimeout(st,t-Ro.now()-Ho)),Uo&&(Uo=clearInterval(Uo))):(Uo||(Oo=Ro.now(),Uo=setInterval(ut,Po)),Do=1,Yo(st))}}function ht(t,e){var n=_t(t,e);if(n.state>Io)throw new Error("too late; already scheduled");return n}function dt(t,e){var n=_t(t,e);if(n.state>$o)throw new Error("too late; already started");return n}function _t(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function pt(t,e,n){function r(t){n.state=Vo,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)}function i(r){var u,l,f,h;if(n.state!==Vo)return o();for(u in s)if(h=s[u],h.name===n.name){if(h.state===Wo)return qo(i);h.state===Zo?(h.state=Jo,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete s[u]):+u<e&&(h.state=Jo,h.timer.stop(),delete s[u])}if(qo(function(){n.state===Wo&&(n.state=Zo,n.timer.restart(a,n.delay,n.time),a(r))}),n.state=$o,n.on.call("start",t,t.__data__,n.index,n.group),n.state===$o){for(n.state=Wo,c=new Array(f=n.tween.length),u=0,l=-1;u<f;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(c[++l]=h);c.length=l+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=Qo,1),i=-1,a=c.length;++i<a;)c[i].call(null,r);n.state===Qo&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){n.state=Jo,n.timer.stop(),delete s[e];for(var r in s)return;delete t.__transition}var c,s=t.__transition;s[e]=n,n.timer=ot(r,0,n.time)}function bt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function gt(){}function yt(t){var e;return t=(t+"").trim().toLowerCase(),(e=ac.exec(t))?(e=parseInt(e[1],16),new Mt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=oc.exec(t))?mt(parseInt(e[1],16)):(e=cc.exec(t))?new Mt(e[1],e[2],e[3],1):(e=sc.exec(t))?new Mt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=uc.exec(t))?vt(e[1],e[2],e[3],e[4]):(e=lc.exec(t))?vt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=fc.exec(t))?Tt(e[1],e[2]/100,e[3]/100,1):(e=hc.exec(t))?Tt(e[1],e[2]/100,e[3]/100,e[4]):dc.hasOwnProperty(t)?mt(dc[t]):"transparent"===t?new Mt(NaN,NaN,NaN,0):null}function mt(t){return new Mt(t>>16&255,t>>8&255,255&t,1)}function vt(t,e,n,r){return r<=0&&(t=e=n=NaN),new Mt(t,e,n,r)}function xt(t){return t instanceof gt||(t=yt(t)),t?(t=t.rgb(),new Mt(t.r,t.g,t.b,t.opacity)):new Mt}function wt(t,e,n,r){return 1===arguments.length?xt(t):new Mt(t,e,n,null==r?1:r)}function Mt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function kt(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Tt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Nt(t,e,n,r)}function At(t){if(t instanceof Nt)return new Nt(t.h,t.s,t.l,t.opacity);if(t instanceof gt||(t=yt(t)),!t)return new Nt;if(t instanceof Nt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,c=a-i,s=(a+i)/2;return c?(o=e===a?(n-r)/c+6*(n<r):n===a?(r-e)/c+2:(e-n)/c+4,c/=s<.5?a+i:2-a-i,o*=60):c=s>0&&s<1?0:o,new Nt(o,c,s,t.opacity)}function Ct(t,e,n,r){return 1===arguments.length?At(t):new Nt(t,e,n,null==r?1:r)}function Nt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function St(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Et(t){if(t instanceof Ft)return new Ft(t.l,t.a,t.b,t.opacity);if(t instanceof Ht){if(isNaN(t.h))return new Ft(t.l,0,0,t.opacity);var e=t.h*_c;return new Ft(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Mt||(t=xt(t));var n,r,i=Pt(t.r),a=Pt(t.g),o=Pt(t.b),c=Dt((.2225045*i+.7168786*a+.0606169*o)/gc);return i===a&&a===o?n=r=c:(n=Dt((.4360747*i+.3850649*a+.1430804*o)/bc),r=Dt((.0139322*i+.0971045*a+.7141733*o)/yc)),new Ft(116*c-16,500*(n-c),200*(c-r),t.opacity)}function zt(t,e,n,r){return 1===arguments.length?Et(t):new Ft(t,e,n,null==r?1:r)}function Ft(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Dt(t){return t>wc?Math.pow(t,1/3):t/xc+mc}function Lt(t){return t>vc?t*t*t:xc*(t-mc)}function Ut(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Pt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ot(t){if(t instanceof Ht)return new Ht(t.h,t.c,t.l,t.opacity);if(t instanceof Ft||(t=Et(t)),0===t.a&&0===t.b)return new Ht(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*pc;return new Ht(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Bt(t,e,n,r){return 1===arguments.length?Ot(t):new Ht(t,e,n,null==r?1:r)}function Ht(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Rt(t){if(t instanceof qt)return new qt(t.h,t.s,t.l,t.opacity);t instanceof Mt||(t=xt(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ec*r+Nc*e-Sc*n)/(Ec+Nc-Sc),a=r-i,o=(Cc*(n-i)-Tc*a)/Ac,c=Math.sqrt(o*o+a*a)/(Cc*i*(1-i)),s=c?Math.atan2(o,a)*pc-120:NaN;return new qt(s<0?s+360:s,c,i,t.opacity)}function Yt(t,e,n,r){return 1===arguments.length?Rt(t):new qt(t,e,n,null==r?1:r)}function qt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function jt(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function Xt(t,e){return function(n){return t+n*e}}function It(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Vt(t,e){var n=e-t;return n?Xt(t,n>180||n<-180?n-360*Math.round(n/360):n):Pc(isNaN(t)?e:t)}function $t(t){return 1==(t=+t)?Wt:function(e,n){return n-e?It(e,n,t):Pc(isNaN(e)?n:e)}}function Wt(t,e){var n=e-t;return n?Xt(t,n):Pc(isNaN(t)?e:t)}function Zt(t){return function(){return t}}function Qt(t){return function(e){return t(e)+""}}function Jt(t){return"none"===t?Zc:(zc||(zc=document.createElement("DIV"),Fc=document.documentElement,Dc=document.defaultView),zc.style.transform=t,t=Dc.getComputedStyle(Fc.appendChild(zc),null).getPropertyValue("transform"),Fc.removeChild(zc),t=t.slice(7,-1).split(","),Qc(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function Gt(t){return null==t?Zc:(Lc||(Lc=document.createElementNS("http://www.w3.org/2000/svg","g")),Lc.setAttribute("transform",t),(t=Lc.transform.baseVal.consolidate())?(t=t.matrix,Qc(t.a,t.b,t.c,t.d,t.e,t.f)):Zc)}function Kt(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,o,c){if(t!==i||r!==a){var s=o.push("translate(",null,e,null,n);c.push({i:s-4,x:Yc(t,i)},{i:s-2,x:Yc(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}function o(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Yc(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function c(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Yc(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function s(t,e,n,r,a,o){if(t!==n||e!==r){var c=a.push(i(a)+"scale(",null,",",null,")");o.push({i:c-4,x:Yc(t,n)},{i:c-2,x:Yc(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),o(e.rotate,n.rotate,r,i),c(e.skewX,n.skewX,r,i),s(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,a=i.length;++n<a;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function te(t){return function e(n){function r(e,r){var i=t((e=Yt(e)).h,(r=Yt(r)).h),a=Wt(e.s,r.s),o=Wt(e.l,r.l),c=Wt(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=c(t),e+""}}return n=+n,r.gamma=e,r}(1)}function ee(t,e){var n,r;return function(){var i=dt(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,c=r.length;o<c;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function ne(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=dt(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var c={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=c;break}s===u&&i.push(c)}a.tween=i}}function re(t,e,n){var r=t._id;return t.each(function(){var t=dt(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return _t(t,r).value[e]}}function ie(t){return function(){this.removeAttribute(t)}}function ae(t){return function(){this.removeAttributeNS(t.space,t.local)}}function oe(t,e,n){var r,i;return function(){var a=this.getAttribute(t);return a===n?null:a===r?i:i=e(r=a,n)}}function ce(t,e,n){var r,i;return function(){var a=this.getAttributeNS(t.space,t.local);return a===n?null:a===r?i:i=e(r=a,n)}}function se(t,e,n){var r,i,a;return function(){var o,c=n(this);return null==c?void this.removeAttribute(t):(o=this.getAttribute(t),o===c?null:o===r&&c===i?a:a=e(r=o,i=c))}}function ue(t,e,n){var r,i,a;return function(){var o,c=n(this);return null==c?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),o===c?null:o===r&&c===i?a:a=e(r=o,i=c))}}function le(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function fe(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}function he(t,e){return function(){ht(this,t).delay=+e.apply(this,arguments)}}function de(t,e){return e=+e,function(){ht(this,t).delay=e}}function _e(t,e){return function(){dt(this,t).duration=+e.apply(this,arguments)}}function pe(t,e){return e=+e,function(){dt(this,t).duration=e}}function be(t,e){if("function"!=typeof e)throw new Error;return function(){dt(this,t).ease=e}}function ge(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function ye(t,e,n){var r,i,a=ge(e)?ht:dt;return function(){var o=a(this,t),c=o.on;c!==r&&(i=(r=c).copy()).on(e,n),o.on=i}}function me(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ve(t,e){var n,r,i;return function(){var a=y(this,t),o=(this.style.removeProperty(t),y(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function xe(t){return function(){this.style.removeProperty(t)}}function we(t,e,n){var r,i;return function(){var a=y(this,t);return a===n?null:a===r?i:i=e(r=a,n)}}function Me(t,e,n){var r,i,a;return function(){var o=y(this,t),c=n(this);return null==c&&(this.style.removeProperty(t),c=y(this,t)),o===c?null:o===r&&c===i?a:a=e(r=o,i=c)}}function ke(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}function Te(t){return function(){this.textContent=t}}function Ae(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function Ce(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ne(t){return J().transition(t)}function Se(){return++ms}function Ee(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function ze(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ws.time=rt(),ws;return n}function Fe(t){return function(e,n){return ks(t(e),n)}}function De(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Ns?10:a>=Ss?5:a>=Es?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Ns?10:a>=Ss?5:a>=Es?2:1)}function Le(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Ns?i*=10:a>=Ss?i*=5:a>=Es&&(i*=2),e<t?-i:i}function Ue(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Pe(){return new Ue}function Oe(t){return t>1?0:t<-1?Vs:Math.acos(t)}function Be(t){return t>=1?$s:t<=-1?-$s:Math.asin(t)}function He(t){return t.innerRadius}function Re(t){return t.outerRadius}function Ye(t){return t.startAngle}function qe(t){return t.endAngle}function je(t){return t&&t.padAngle}function Xe(t,e,n,r,i,a,o,c){var s=n-t,u=r-e,l=o-i,f=c-a,h=(l*(e-a)-f*(t-i))/(f*s-l*u);return[t+h*s,e+h*u]}function Ie(t,e,n,r,i,a,o){var c=t-n,s=e-r,u=(o?a:-a)/Xs(c*c+s*s),l=u*s,f=-u*c,h=t+l,d=e+f,_=n+l,p=r+f,b=(h+_)/2,g=(d+p)/2,y=_-h,m=p-d,v=y*y+m*m,x=i-a,w=h*p-_*d,M=(m<0?-1:1)*Xs(Ys(0,x*x*v-w*w)),k=(w*m-y*M)/v,T=(-w*y-m*M)/v,A=(w*m+y*M)/v,C=(-w*y+m*M)/v,N=k-b,S=T-g,E=A-b,z=C-g;return N*N+S*S>E*E+z*z&&(k=A,T=C),{cx:k,cy:T,x01:-l,y01:-f,x11:k*(i/x-1),y11:T*(i/x-1)}}function Ve(t){this._context=t}function $e(t){return t[0]}function We(t){return t[1]}function Ze(t){this._curve=t}function Qe(t){function e(e){return new Ze(t(e))}return e._curve=t,e}function Je(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Qe(t)):e()._curve},t}function Ge(t){return t.source}function Ke(t){return t.target}function tn(t){function e(){var e,c=ou.call(arguments),s=n.apply(this,c),u=r.apply(this,c);if(o||(o=e=Pe()),t(o,+i.apply(this,(c[0]=s,c)),+a.apply(this,c),+i.apply(this,(c[0]=u,c)),+a.apply(this,c)),e)return o=null,e+""||null}var n=Ge,r=Ke,i=$e,a=We,o=null;return e.source=function(t){return arguments.length?(n=t,e):n},e.target=function(t){return arguments.length?(r=t,e):r},e.x=function(t){return arguments.length?(i="function"==typeof t?t:Os(+t),e):i},e.y=function(t){return arguments.length?(a="function"==typeof t?t:Os(+t),e):a},e.context=function(t){return arguments.length?(o=null==t?null:t,e):o},e}function en(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function nn(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function rn(t,e,n,r,i){var a=au(e,n),o=au(e,n=(n+i)/2),c=au(r,n),s=au(r,i);t.moveTo(a[0],a[1]),t.bezierCurveTo(o[0],o[1],c[0],c[1],s[0],s[1])}function an(){return tn(en)}function on(){return tn(nn)}function cn(){var t=tn(rn);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}function sn(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function un(t){this._context=t}function ln(t){this._context=t}function fn(t){this._context=t}function hn(t,e){this._basis=new un(t),this._beta=e}function dn(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function _n(t,e){this._context=t,this._k=(1-e)/6}function pn(t,e){this._context=t,this._k=(1-e)/6}function bn(t,e){this._context=t,this._k=(1-e)/6}function gn(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Is){var c=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*c-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*c-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>Is){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/l,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function yn(t,e){this._context=t,this._alpha=e}function mn(t,e){this._context=t,this._alpha=e}function vn(t,e){this._context=t,this._alpha=e}function xn(t){this._context=t}function wn(t){return t<0?-1:1}function Mn(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),c=(a*i+o*r)/(r+i);return(wn(a)+wn(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(c))||0}function kn(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Tn(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,c=(a-r)/3;t._context.bezierCurveTo(r+c,i+c*e,a-c,o-c*n,a,o)}function An(t){this._context=t}function Cn(t){this._context=new Nn(t)}function Nn(t){this._context=t}function Sn(t){return new An(t)}function En(t){return new Cn(t)}function zn(t){this._context=t}function Fn(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Dn(t,e){this._context=t,this._t=e}function Ln(t){return new Dn(t,0)}function Un(t){return new Dn(t,1)}function Pn(t,e){return t[e]}function On(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function Bn(t,e){ju=e,Rn(),Hu=document.createElement("div"),Hu.className="flourish-footer",Ru=document.createElement("p"),Ru.className="flourish-footer-source",Yu=document.createElement("p"),Yu.className="flourish-footer-note",Hu.appendChild(Ru),Hu.appendChild(Yu),t.appendChild(Hu),Hn()}function Hn(){var t=document.createElement("style");t.type="text/css",t.innerHTML=".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a {color: inherit; } .flourish-footer .flourish-footer-note {margin-left: 3px; }",document.body.appendChild(t)}function Rn(){for(var t in cl)ju[t]||(ju[t]=cl[t])}function Yn(){var t=[{name:ju.footer_source_name,url:ju.footer_source_url},{name:ju.footer_multiple_sources?ju.footer_source_name_2:"",url:ju.footer_multiple_sources?ju.footer_source_url_2:""},{name:ju.footer_multiple_sources?ju.footer_source_name_3:"",url:ju.footer_multiple_sources?ju.footer_source_url_3:""}].filter(function(t){return t.name||t.url});qu=t.length>0,Hu.style.height=qu?null:0,Hu.style.margin=qn(),Hu.style.fontSize=ju.footer_size+"px",Hu.style.textAlign=ju.footer_align,Hu.style.color=ju.footer_color;var e=document.createElement("span");t.forEach(function(t,n){var r=document.createElement("p");if(n>0&&(r.innerText=", "),t.url){var i=document.createElement("a");i.innerText=t.name||t.url,i.href=In(t.url),i.target="_blank",r.appendChild(i)}else r.innerText+=t.name||t.url;e.appendChild(r)}),Ru.innerHTML=""!==e.innerHTML?ju.footer_source_label+" "+e.outerHTML:"",Yu.innerHTML=ju.footer_note?(""!==e.innerHTML?"• ":"")+ju.footer_note:""}function qn(){return qu?ju.footer_margin_advanced?ju.footer_margin_top+"px "+ju.footer_margin_right+"px "+ju.footer_margin_bottom+"px "+ju.footer_margin_left+"px":ju.footer_margin+"px "+ju.footer_margin+"px 0 "+ju.footer_margin+"px":0}function jn(){return Hu.getBoundingClientRect().height+Xn()}function Xn(){return qu?ju.footer_margin_advanced?ju.footer_margin_top+ju.footer_margin_bottom:+ju.footer_margin:0}function In(t){return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")?"http://"+t:t}function Vn(t){Xu=document.createElement("div"),Xu.className="flourish-header",Iu=document.createElement("h1"),Vu=document.createElement("h2"),Xu.appendChild(Iu),Xu.appendChild(Vu),t.appendChild(Xu)}function $n(){$u=Ea.header_title||Ea.header_subtitle?Ea.header_margin:0,Xu.style.color=Ea.header_color,Xu.style.margin=Ea.header_margin+"px",Xu.style.marginTop=$u+"px",Xu.style.marginBottom=$u+"px",Xu.style.textAlign=Ea.header_align,Iu.innerHTML=Ea.header_title?Ea.header_title:"",Vu.innerHTML=Ea.header_subtitle?Ea.header_subtitle:"",Iu.style.margin=Ea.header_title?null:0,Vu.style.margin=Ea.header_subtitle?null:0}function Wn(){return Xu.getBoundingClientRect().height+2*$u}function Zn(){}function Qn(t,e){var n=new Zn;if(t instanceof Zn)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function Jn(){}function Gn(t,e){var n=new Jn;if(t instanceof Jn)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}function Kn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:hl(e)}function tr(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function er(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function nr(t,e,n,r){var i=t[0],a=t[1],o=e[0],c=e[1];return a<i?(i=n(a,i),o=r(c,o)):(i=n(i,a),o=r(o,c)),function(t){return o(i(t))}}function rr(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),c=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<i;)a[c]=n(t[c],t[c+1]),o[c]=r(e[c],e[c+1]);return function(e){var n=As(t,e,1,i)-1;return o[n](a[n](e))}}function ir(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function ar(t,e){function n(){return i=Math.min(c.length,s.length)>2?rr:nr,a=o=null,r}function r(e){return(a||(a=i(c,s,l?tr(t):t,u)))(+e)}var i,a,o,c=_l,s=_l,u=Vc,l=!1;return r.invert=function(t){return(o||(o=i(s,c,Kn,l?er(e):e)))(+t)},r.domain=function(t){return arguments.length?(c=ll.call(t,dl),n()):c.slice()},r.range=function(t){return arguments.length?(s=fl.call(t),n()):s.slice()},r.rangeRound=function(t){return s=fl.call(t),u=$c,n()},r.clamp=function(t){return arguments.length?(l=!!t,n()):l},r.interpolate=function(t){return arguments.length?(u=t,n()):u},n()}function or(t){return new cr(t)}function cr(t){if(!(e=ml.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function sr(t){var e=t.domain;return t.ticks=function(t){var n=e();return zs(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Ll(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,c=i[a],s=i[o];return s<c&&(r=c,c=s,s=r,r=a,a=o,o=r),r=De(c,s,n),r>0?(c=Math.floor(c/r)*r,s=Math.ceil(s/r)*r,r=De(c,s,n)):r<0&&(c=Math.ceil(c*r)/r,s=Math.floor(s*r)/r,r=De(c,s,n)),r>0?(i[a]=Math.floor(c/r)*r,i[o]=Math.ceil(s/r)*r,e(i)):r<0&&(i[a]=Math.ceil(c*r)/r,i[o]=Math.floor(s*r)/r,e(i)),t},t}function ur(){var t=ar(Kn,Yc);return t.copy=function(){return ir(t,ur())},sr(t)}function lr(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,c=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return c;do{c.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return c},i.filter=function(n){return lr(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Ul.setTime(+e),Pl.setTime(+r),t(Ul),t(Pl),Math.floor(n(Ul,Pl))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}function fr(t){return lr(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Bl)/Hl})}function hr(t){return lr(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Hl})}function dr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _r(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function pr(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function br(t){function e(t,e){return function(n){var r,i,a,o=[],c=-1,s=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++c<u;)37===t.charCodeAt(c)&&(o.push(t.slice(s,c)),null!=(i=ef[r=t.charAt(++c)])?r=t.charAt(++c):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),s=c+1);return o.push(t.slice(s,c)),o.join("")}}function n(t,e){return function(n){var i,a,o=pr(1900),c=r(o,t,n+="",0);if(c!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=_r(pr(o.y)),a=i.getUTCDay(),i=a>4||0===a?$l.ceil(i):$l(i),i=Il.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(i=e(pr(o.y)),a=i.getDay(),i=a>4||0===a?ql.ceil(i):ql(i),i=Rl.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?_r(pr(o.y)).getUTCDay():e(pr(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,_r(o)):e(o)}}function r(t,e,n,r){for(var i,a,o=0,c=e.length,s=n.length;o<c;){if(r>=s)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=q[i in ef?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function i(t,e,n){var r=E.exec(e.slice(n));return r?(t.p=z[r[0].toLowerCase()],n+r[0].length):-1}function a(t,e,n){var r=L.exec(e.slice(n));return r?(t.w=U[r[0].toLowerCase()],n+r[0].length):-1}function o(t,e,n){var r=F.exec(e.slice(n));return r?(t.w=D[r[0].toLowerCase()],n+r[0].length):-1}function c(t,e,n){var r=B.exec(e.slice(n));return r?(t.m=H[r[0].toLowerCase()],n+r[0].length):-1}function s(t,e,n){var r=P.exec(e.slice(n));return r?(t.m=O[r[0].toLowerCase()],n+r[0].length):-1}function u(t,e,n){return r(t,w,e,n)}function l(t,e,n){return r(t,M,e,n)}function f(t,e,n){return r(t,k,e,n)}function h(t){return C[t.getDay()]}function d(t){return A[t.getDay()]}function _(t){return S[t.getMonth()]}function p(t){return N[t.getMonth()]}function b(t){return T[+(t.getHours()>=12)]}function g(t){return C[t.getUTCDay()]}function y(t){return A[t.getUTCDay()]}function m(t){return S[t.getUTCMonth()]}function v(t){return N[t.getUTCMonth()]}function x(t){return T[+(t.getUTCHours()>=12)]}var w=t.dateTime,M=t.date,k=t.time,T=t.periods,A=t.days,C=t.shortDays,N=t.months,S=t.shortMonths,E=mr(T),z=vr(T),F=mr(A),D=vr(A),L=mr(C),U=vr(C),P=mr(N),O=vr(N),B=mr(S),H=vr(S),R={a:h,A:d,b:_,B:p,c:null,d:Rr,e:Rr,f:Ir,H:Yr,I:qr,j:jr,L:Xr,m:Vr,M:$r,p:b,Q:xi,s:wi,S:Wr,u:Zr,U:Qr,V:Jr,w:Gr,W:Kr,x:null,X:null,y:ti,Y:ei,Z:ni,"%":vi},Y={a:g,A:y,b:m,B:v,c:null,d:ri,e:ri,f:si,H:ii,I:ai,j:oi,L:ci,m:ui,M:li,p:x,Q:xi,s:wi,S:fi,u:hi,U:di,V:_i,w:pi,W:bi,x:null,X:null,y:gi,Y:yi,Z:mi,"%":vi},q={a:a,A:o,b:c,B:s,c:u,d:Er,e:Er,f:Pr,H:Fr,I:Fr,j:zr,L:Ur,
m:Sr,M:Dr,p:i,Q:Br,s:Hr,S:Lr,u:wr,U:Mr,V:kr,w:xr,W:Tr,x:l,X:f,y:Cr,Y:Ar,Z:Nr,"%":Or};return R.x=e(M,R),R.X=e(k,R),R.c=e(w,R),Y.x=e(M,Y),Y.X=e(k,Y),Y.c=e(w,Y),{format:function(t){var n=e(t+="",R);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",dr);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",Y);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,_r);return e.toString=function(){return t},e}}}function gr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function yr(t){return t.replace(af,"\\$&")}function mr(t){return new RegExp("^(?:"+t.map(yr).join("|")+")","i")}function vr(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function xr(t,e,n){var r=nf.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function wr(t,e,n){var r=nf.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Mr(t,e,n){var r=nf.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function kr(t,e,n){var r=nf.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Tr(t,e,n){var r=nf.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Ar(t,e,n){var r=nf.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Cr(t,e,n){var r=nf.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Nr(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Sr(t,e,n){var r=nf.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Er(t,e,n){var r=nf.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function zr(t,e,n){var r=nf.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Fr(t,e,n){var r=nf.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Dr(t,e,n){var r=nf.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Lr(t,e,n){var r=nf.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Ur(t,e,n){var r=nf.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Pr(t,e,n){var r=nf.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Or(t,e,n){var r=rf.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Br(t,e,n){var r=nf.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Hr(t,e,n){var r=nf.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Rr(t,e){return gr(t.getDate(),e,2)}function Yr(t,e){return gr(t.getHours(),e,2)}function qr(t,e){return gr(t.getHours()%12||12,e,2)}function jr(t,e){return gr(1+Rl.count(Xl(t),t),e,3)}function Xr(t,e){return gr(t.getMilliseconds(),e,3)}function Ir(t,e){return Xr(t,e)+"000"}function Vr(t,e){return gr(t.getMonth()+1,e,2)}function $r(t,e){return gr(t.getMinutes(),e,2)}function Wr(t,e){return gr(t.getSeconds(),e,2)}function Zr(t){var e=t.getDay();return 0===e?7:e}function Qr(t,e){return gr(Yl.count(Xl(t),t),e,2)}function Jr(t,e){var n=t.getDay();return t=n>=4||0===n?jl(t):jl.ceil(t),gr(jl.count(Xl(t),t)+(4===Xl(t).getDay()),e,2)}function Gr(t){return t.getDay()}function Kr(t,e){return gr(ql.count(Xl(t),t),e,2)}function ti(t,e){return gr(t.getFullYear()%100,e,2)}function ei(t,e){return gr(t.getFullYear()%1e4,e,4)}function ni(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+gr(e/60|0,"0",2)+gr(e%60,"0",2)}function ri(t,e){return gr(t.getUTCDate(),e,2)}function ii(t,e){return gr(t.getUTCHours(),e,2)}function ai(t,e){return gr(t.getUTCHours()%12||12,e,2)}function oi(t,e){return gr(1+Il.count(Zl(t),t),e,3)}function ci(t,e){return gr(t.getUTCMilliseconds(),e,3)}function si(t,e){return ci(t,e)+"000"}function ui(t,e){return gr(t.getUTCMonth()+1,e,2)}function li(t,e){return gr(t.getUTCMinutes(),e,2)}function fi(t,e){return gr(t.getUTCSeconds(),e,2)}function hi(t){var e=t.getUTCDay();return 0===e?7:e}function di(t,e){return gr(Vl.count(Zl(t),t),e,2)}function _i(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Wl(t):Wl.ceil(t),gr(Wl.count(Zl(t),t)+(4===Zl(t).getUTCDay()),e,2)}function pi(t){return t.getUTCDay()}function bi(t,e){return gr($l.count(Zl(t),t),e,2)}function gi(t,e){return gr(t.getUTCFullYear()%100,e,2)}function yi(t,e){return gr(t.getUTCFullYear()%1e4,e,4)}function mi(){return"+0000"}function vi(){return"%"}function xi(t){return+t}function wi(t){return Math.floor(+t/1e3)}function Mi(t){return t.toISOString()}function ki(t){var e=new Date(t);return isNaN(e)?null:e}function Ti(t,e){var n=window.innerHeight;gf=gf||document.getElementById("viz-ui");var r=n-Wn()-jn()-gf.getBoundingClientRect().height;Bf.attr("width",window.innerWidth).attr("height",r);var i=Ea.end_circle_r+Ea.end_circle_stroke,a=nh?i:Ea.margin_right,o=Math.max(i,Ea.start_circle_r)+Ea.margin_bottom,c=Math.max(i,Ea.start_circle_r)+Ea.margin_top,s=Math.max(i,Ea.start_circle_r)+Ea.margin_left;Hf.attr("transform","translate("+s+","+c+")"),ff=Math.max(0,window.innerWidth-s-a),hf=Math.max(0,r-c-o),df=ur().range([0,ff]).domain([0,Sa.horserace.column_names.stages.length-1]);var u;"ranks"==Ea.value_type?u=[Ea.y_axis_max_rank||e,Ea.y_axis_min_rank||1]:(pf=Fs(Sa.horserace,function(t){return Fs(t.stages,function(t){return+t})}),bf=Ds(Sa.horserace,function(t){return Ds(t.stages,function(t){return+t})}),""!==Ea.y_axis_min&&null!==Ea.y_axis_min&&(bf=Ea.y_axis_min),""!==Ea.y_axis_max&&null!==Ea.y_axis_max&&(pf=Ea.y_axis_max),u=Ea.higher_scores_win?[bf,pf]:[pf,bf]),_f=ur().range([hf,0]).domain(u);var l=Math.max(Ea.start_circle_r,Ea.line_width/2,Ea.shade_width/2)+Ea.margin_left;To("#clip rect").attr("transform","translate(0,-"+c+")").attr("height",hf+c+o).attr("width",df(t)+l).attr("x",-l)}function Ai(t){var e=Sa.horserace.column_names.stages.length;vf>e-1&&(vf=e-1),t&&(vf=1)}function Ci(){var t={},e=Ma();So(".labels-group").each(function(n){var r=n.ranks[e];null!=r&&(r in t?t[r].push(this):t[r]=[this])});for(var n in t){var r=t[n].sort(function(t,e){return ks(t.__data__.index,e.__data__.index)});if(r.length>1)for(var i=0;i<r.length;i++){var a=.5*rh*(i-.5);To(r[i]).select(".end-circle-container").attr("transform","translate("+a+",0)"),To(r[i]).classed("tied",!0),To(r[i]).selectAll(".name-bg, .name-fg").attr("x",function(){if(nh){var t=this.getBBox().width;return 1.5*-rh-t}return r.length*(.5*rh)+rh/2}),r[i].dataset.shift=a}}}function Ni(){Ea.target_position=0,vf=0,Ea.target_position=Sa.horserace.column_names.stages.length,Ei()}function Si(t){var e=Ma();if(!yf)return yf=t,xf=requestAnimationFrame(Si),void(mf=vf<e);var n;mf?(vf+=(t-yf)/Ea.stage_duration,n=vf>e):(vf-=(t-yf)/Ea.stage_duration,n=vf<e),n&&(vf=e);var r=Math.max(Ea.start_circle_r,Ea.line_width/2,Ea.shade_width/2)+Ea.margin_left;To("#clip rect").attr("width",df(vf)+r).attr("x",-r),ih.interrupt().attr("transform",pa).selectAll(".rank-number").text(function(t){return Ea.rank_outside_picture?"":da(t)+Ea.rank_label_suffix+" "}),ih.selectAll(".name-rank").text(function(t){return Ea.rank_outside_picture?da(t)+Ea.rank_label_suffix+" ":""}).each(function(){To(this.parentNode).attr("x",function(){if(nh){var t=this.getBBox().width;return-rh-4-t}return rh+4})}),n?(xf=null,Ci()):(xf=requestAnimationFrame(Si),yf=t)}function Ei(){yf=null,xf&&cancelAnimationFrame(xf),xf=requestAnimationFrame(Si)}function zi(t){return"url('data:image/svg+xml;base64,"+window.btoa(t)+"')"}function Fi(t){if(!Mf&&"undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),Mf=!0}}function Di(t){Fi(wf);var e={},n={slider_step_time:2,slider_loop:!0,slider_loop_pause:0,slider_play_button:!0,slider_handle_colour:"#333",slider_label:!0,dropdown_icon_colour:"#333333"};Object.keys(n).forEach(function(t){var r=t.replace(/_\w/g,function(t){return t.charAt(1).toUpperCase()});e[r]=function(r){return void 0===r?n[t]:(n[t]=r,e)}}),n.type="auto_buttons",e.type=function(t){return void 0===t?n.type:(n.type=-1!==kf.indexOf(t)?t:"auto-buttons",e)},Object.defineProperty(n,"control",{get:function(){var t=n.type;return"dropdown"===t||"slider"===t||"none"===t?n.type:"buttons"},set:function(){console.warn("Nothing changed: control is read only")}}),Object.defineProperty(n,"buttons_type",{get:function(){if("buttons"===n.control)return"auto-buttons"===n.type?"auto":"grouped-buttons"===n.type?"grouped":"floating"},set:function(){console.warn("Nothing changed: button_type is read only")}}),n.index=0,e.index=function(t){if(void 0===t)return n.n_options?n.index:null;if(null!==t){if(!Number.isFinite(t))throw TypeError("index must be a number greater than or equal to 0.");if(t<0)throw RangeError("index must be greater than or equal to 0.");n.index=Math.floor(t)}return e},n.options=[],Object.defineProperty(n,"n_options",{get:function(){return n.options.length},set:function(){console.warn("Nothing changed: n_options is read only")}}),e.options=function(t){if(void 0===t)return n.options.slice();if(!Array.isArray(t))throw TypeError("opts must be an array.");return n.options=Object.freeze(t.slice()),e},Object.defineProperty(n,"value",{get:function(){return n.n_options?n.options[n.index]:null},set:function(){console.warn("Nothing changed: value is read only")}}),e.value=function(t){if(void 0===t)return n.value;if(null!==t){var r=n.options.indexOf(t);-1!==r?n.index=r:console.warn("Nothing changed: value not in options list")}return e},Object.defineProperty(n,"width",{get:function(){return o.getBoundingClientRect().width+"px"},set:function(){console.warn("Nothing changed: width is read only")}}),n.changeHandlers=[],e.on=function(t,r){return"change"===t&&n.changeHandlers.push(r.bind(e)),e};var r=function(){var t=n.value,e=n.index;n.changeHandlers.forEach(function(n){n(t,e)})};Object.seal(n);var i,a=To(t);a.classed("controls-container")?i=!1:(a.classed("controls-container",!0),i=!0);var o=a.node();return e.container=a,{output_obj:e,props:n,onChangeCallbacks:r,container:a,container_node:o,container_selector:t,added_class:i}}function Li(t){return zi('<svg width="6px" height="12px" viewBox="0 0 6 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g transform="translate(-442.000000, -44.000000)" fill="'+t+'"> <g id="Group" transform="translate(442.000000, 44.000000)"> <polygon id="Triangle-2" points="3 0 6 5 0 5"></polygon> <polygon id="Triangle-2-Copy" points="3 12 0 7 6 7"></polygon> </g> </g> </svg>')}function Ui(t){var e=t.container,n=t.props,r=t.onChangeCallbacks,i=e.append("div").attr("class","dropdown"),a=i.append("div").attr("class","main"),o=a.append("span").attr("class","current"),c=a.append("span").attr("class","symbol"),s=i.append("div").attr("class","list"),u=function(){i.classed("open",!1)},l=function(){i.classed("open",!i.classed("open"))},f=i.node();document.querySelector("body").addEventListener("click",function(t){if(i.classed("open")){for(var e=t.target,n=e.parentElement;n;){if(e===f)return;e=n,n=e.parentElement}u()}},!1),a.on("click",function(){l()});var h=function(){var t;return function(){t!==n.dropdown_icon_colour&&(t=n.dropdown_icon_colour,c.style("background-image",Li(t)))}}(),d=function(){h(),i.style("width",n.width).style("display","inline-table"),i.select(".main").style("width",n.width)},_=function(){u(),i.style("display","none")},p=function(){o.text(n.value).attr("title",n.value)},b=function(){s.text("").selectAll(".list-item").data(n.options).enter().append("div").attr("class","list-item").text(function(t){return t}).on("click",function(t,e){u(),To(this).classed("selected")||(n.index=e,r())})},g=function(){i.remove()},y={handle:i};return y.show=function(){return d(),y},y.hide=function(){return _(),y},y.setValue=function(){return p(),y},y.setOptions=function(){return b(),y},y.remove=function(){return g(),y},y}function Pi(t,e){var n,r,i=t.container,a=t.props,o=t.onChangeCallbacks,c=i.append("div").attr("class","button-container"),s=function(){if("floating"===a.buttons_type)c.style("width",null).style("display","inline-block").classed("button-group",!1);else if(c.style("width",a.width).style("display","table").classed("button-group",!0),"auto"===a.buttons_type){var t=r.every(function(t){return t.offsetWidth>=t.scrollWidth});t||(u(),e.show())}},u=function(){c.style("display","none")},l=function(){n&&n.each(function(t,e){To(this).classed("selected",e===a.index)})},f=function(){n=c.text("").selectAll(".button").data(a.options).enter().append("div").attr("class","button").classed("selected",function(t,e){return e===a.index}).text(function(t){return t}).attr("title",function(t){return t}).on("click",function(t,e){e!==a.index&&(a.index=e,o())}),r=n.nodes()},h=function(){c.remove()},d={handle:c};return d.show=function(){return s(),d},d.hide=function(){return u(),d},d.setValue=function(){return l(),d},d.setOptions=function(){return f(),d},d.remove=function(){return h(),d},d}function Oi(t){return"translate("+(t+.5)+",0)"}function Bi(t){return"translate(0,"+(t+.5)+")"}function Hi(t){return function(e){return+t(e)}}function Ri(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Yi(){return!this.__axis}function qi(t,e){function n(n){var h=null==i?e.ticks?e.ticks.apply(e,r):e.domain():i,d=null==a?e.tickFormat?e.tickFormat.apply(e,r):Af:a,_=Math.max(o,0)+s,p=e.range(),b=+p[0]+.5,g=+p[p.length-1]+.5,y=(e.bandwidth?Ri:Hi)(e.copy()),m=n.selection?n.selection():n,v=m.selectAll(".domain").data([null]),x=m.selectAll(".tick").data(h,e).order(),w=x.exit(),M=x.enter().append("g").attr("class","tick"),k=x.select("line"),T=x.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),x=x.merge(M),k=k.merge(M.append("line").attr("stroke","#000").attr(l+"2",u*o)),T=T.merge(M.append("text").attr("fill","#000").attr(l,u*_).attr("dy",t===Cf?"0em":t===Sf?"0.71em":"0.32em")),n!==m&&(v=v.transition(n),x=x.transition(n),k=k.transition(n),T=T.transition(n),w=w.transition(n).attr("opacity",zf).attr("transform",function(t){return isFinite(t=y(t))?f(t):this.getAttribute("transform")}),M.attr("opacity",zf).attr("transform",function(t){var e=this.parentNode.__axis;return f(e&&isFinite(e=e(t))?e:y(t))})),w.remove(),v.attr("d",t===Ef||t==Nf?"M"+u*c+","+b+"H0.5V"+g+"H"+u*c:"M"+b+","+u*c+"V0.5H"+g+"V"+u*c),x.attr("opacity",1).attr("transform",function(t){return f(y(t))}),k.attr(l+"2",u*o),T.attr(l,u*_).text(d),m.filter(Yi).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Nf?"start":t===Ef?"end":"middle"),m.each(function(){this.__axis=y})}var r=[],i=null,a=null,o=6,c=6,s=3,u=t===Cf||t===Ef?-1:1,l=t===Ef||t===Nf?"x":"y",f=t===Cf||t===Sf?Oi:Bi;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return r=Tf.call(arguments),n},n.tickArguments=function(t){return arguments.length?(r=null==t?[]:Tf.call(t),n):r.slice()},n.tickValues=function(t){return arguments.length?(i=null==t?null:Tf.call(t),n):i&&i.slice()},n.tickFormat=function(t){return arguments.length?(a=t,n):a},n.tickSize=function(t){return arguments.length?(o=c=+t,n):o},n.tickSizeInner=function(t){return arguments.length?(o=+t,n):o},n.tickSizeOuter=function(t){return arguments.length?(c=+t,n):c},n.tickPadding=function(t){return arguments.length?(s=+t,n):s},n}function ji(t){return qi(Cf,t)}function Xi(t){return qi(Sf,t)}function Ii(t){return qi(Ef,t)}function Vi(t){this.container=To(t),this._width=null,this._height=null,this._handleRadius=15,this._channelHeight=5,this._channelRadius=null,this._handleFill="black",this._channelFill="#eee",this._margin={top:null,left:null,right:null},this._domain=[0,1],this._value=null,this._snap=!1,this._scale=null,this._axis=!1,this._ticks=null,this._tickFormat=null,this._tickSize=null,this._label=null,this._labelSize=18,this._startLabel=null,this._startLabelBelow=!1,this._endLabel=null,this._endLabelBelow=!1,this._startEndLabelSize=16,this.handlers={change:[]}}function $i(t,e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=t.length),r-n==0)return e;if(r-n==1)return t[n];if(r-n==2){return Math.abs(t[n]-e)<=Math.abs(t[n+1]-e)?t[n]:t[n+1]}var i=n+Math.floor((r-n)/2),a=t[i];return pre=i-1,pre_v=t[pre],pre_v<=e&&e<=a?Math.abs(pre_v-e)<=Math.abs(a-e)?pre_v:a:a<=e?$i(t,e,i,r):$i(t,e,n,i)}function Wi(t,e){return"boolean"==typeof t?t?Math.round(e):e:$i(t,e)}function Zi(t){return new Vi(t)}function Qi(t){return zi('<svg width="25px" height="30px" viewBox="0 0 25 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <polygon id="Triangle" fill="'+t+'" stroke="none" points="25 15 0 30 0 0"></polygon> </svg>')}function Ji(t){return zi('<svg width="26px" height="30px" viewBox="0 0 26 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="'+t+'"><rect x="2" y="2" width="9" height="26"></rect> <rect x="15" y="2" width="9" height="26"></rect> </g> </svg>')}function Gi(t){var e,n,r=t.container,i=t.props,a=t.onChangeCallbacks,o=t.container_selector,c=r.append("div").attr("class","slider-holder animatable"),s=c.append("div").attr("class","slider-play");c.append("div").attr("class","slider");var u,l=Zi(o+" .slider-holder .slider").channelHeight(6).snap(!0).on("change",function(t){t!==i.index&&(i.index=t,a())}),f=function(){u&&(clearInterval(u),u=void 0,c.classed("playing",!1),s.style("background-image",e))},h=function(t){if(0===t&&!i.slider_loop)return void f();var e=1e3*(Math.abs(i.slider_step_time)+(t?0:i.slider_loop_pause));u=setTimeout(function(){var e=i.n_options,n=i.slider_step_time>=0?t:e-(1+t);l.value(n).update(),i.index=n,a(),h((t+1)%e)},e)},d=function(){var t=i.n_options;if(!(t<2)){var e=t-1,r=i.index,o=i.slider_step_time;c.classed("playing",!0),s.style("background-image",n),o>0&&r===e?(r=0,l.value(r).update(),i.index=r,a()):o<0&&0===r&&(r=e,l.value(r).update(),i.index=r,a());h((o>0?r:t-(1+r))+1)}};s.on("click",function(){c.classed("playing")?f():i.slider_play_button&&d()});var _=function(){c.style("width",i.width);var t=window.innerWidth,e=t<520?12:15;l.labelSize(t<520?12:14).handleRadius(e).margin({left:e+5,right:e,top:t<520?33:31})},p=function(){var t;return function(){i.slider_play_button?(c.classed("animatable",!0),s.style("transform",i.slider_step_time<0?"rotate(180deg)":null)):(f(),c.classed("animatable",!1)),t!==i.slider_handle_colour&&(l.update(),t=i.slider_handle_colour,c.select(".slider-handle").style("fill",t),e=Qi(t),n=Ji(t),s.style("background-image",u?n:e))}}(),b=function(){var t;t=!0===i.slider_label?i.value:"string"==typeof i.slider_label?i.slider_label:null,l.label(t)},g=function(){_(),p(),b()},y=function(){c.style("display","inline-block"),g(),l.update()},m=function(){f(),c.style("display","none")},v=function(){l.value(i.index)},x=function(){l.domain([0,i.n_options-1]).update()},w=function(){c.remove()},M={handle:c};return M.show=function(){return y(),M},M.hide=function(){return m(),M},M.setValue=function(){return v(),M},M.setOptions=function(){return x(),M},M.remove=function(){return w(),M},M}function Ki(t){var e=Di(t),n=e.output_obj,r=e.props,i=e.container,a=Ui(e),o=Pi(e,a),c=Gi(e),s=function(){var t=[];return function(){var e=r.options,n=e.length;if(!(n<2))return(!t||e.length!==t.length||!e.every(function(e,n){return e===t[n]}))&&(t=Object.freeze(e.slice()),r.index>n-1&&(r.index=n-1),!0)}}(),u=function(){var t,e;return function(){if(t===r.index&&e===r.value)return!1;var n=r.n_options;return r.index>n-1&&(r.index=n-1),t=r.index,e=r.value,!0}}(),l=function(){a.setOptions(),o.setOptions(),c.setOptions()},f=function(){a.setValue(),o.setValue(),c.setValue()},h=function(t){"none"===t?i.style("display","none"):i.style("display",null),"dropdown"===t?a.show():a.hide(),"slider"===t?c.show():c.hide(),"buttons"===t?o.show():o.hide()},d=function(){var t=s();if(r.n_options<2)return r.index=0,void h("none");(u()||t)&&(t&&l(),f()),h(r.control)},_=function(){a.remove(),o.remove(),c.remove(),e.added_class&&i.classed("controls-container",!1),window.removeEventListener("resize",d)};return window.addEventListener("resize",d),n.update=function(){return d(),this},n.remove=function(){return _(),this},n}function ta(){var t=Pf.getBoundingClientRect().width,e=Of.getBoundingClientRect().width;Uf.style("width",Math.min(Ea.filter_width,t-e)+"px"),Uf.node().getBoundingClientRect().width+e>t&&Uf.style("width",Math.min(Ea.filter_width,t)+"px")}function ea(){if(void 0===Sa.horserace.column_names.filter)return null;var t=Gn(Sa.horserace,function(t){return t.filter}),e=[];return t.each(function(t){e.push(t)}),e.length&&Ea.filter_include_all&&e.unshift(Ea.filter_all_label),e}function na(){Lf=Ki("#filter-control").on("change",function(t){Ea.filter=t,Ca()}),Uf=To("#filter-control"),Pf=Xf.node(),Of=Xf.select("#horse-controls").node()}function ra(){ta();var t=ea();t?Lf.options(t).value(Ea.filter).type(Ea.filter_control_type).update():Lf.options([]).update(),Ea.filter=Lf.value()}function ia(){xo.target&&(xo.target.getAttribute("class"),"check-rect"==xo.target.getAttribute("class"))||(Ea.selected_horse=null,Ca())}function aa(){var t=To("body");Vn(t.node()),Xf=t.append("div").attr("id","viz-ui"),Bf=t.append("svg").on("click",ia),Bn(t.node(),Ea),Hf=Bf.append("g").attr("id","plot"),Hf.append("clipPath").attr("id","clip").append("rect").attr("width",0),Hf.append("clipPath").attr("id","circleClip").append("circle"),jf=Hf.append("g").attr("class","g-checks"),Hf.append("g").attr("class","x axis").style("pointer-events","none"),Hf.append("g").attr("class","y axis").style("pointer-events","none"),Rf=Hf.append("g").attr("class","g-lines"),qf=Hf.append("g").attr("class","g-start-circles"),Yf=Hf.append("g").attr("class","g-labels");var e=Xf.append("div").attr("id","horse-controls");e.append("button").attr("id","replay").text(Ea.label_replay).on("click",Ni);var n=e.append("div").attr("id","rank-toggle");n.append("button").attr("id","ranks").text(Ea.label_ranks).attr("data-type","ranks"),n.append("button").attr("id","scores").text(Ea.label_scores).attr("data-type","scores"),n.selectAll("button").on("click",function(){Ea.value_type=To(this).attr("data-type"),Ca()}).classed("selected",function(){return To(this).attr("data-type")===("ranks"==Ea.value_type?Ea.label_ranks:Ea.label_scores)}),Xf.append("div").attr("id","filter-control").style("display","inline-block"),na()}function oa(){var t=[],e=0;Sa.horserace.forEach(function(t,e){t.unfiltered_index=e});var n;n=null===Ea.filter||Ea.filter===Ea.filter_all_label?Sa.horserace:Sa.horserace.filter(function(t){return t.filter===Ea.filter}),Sa.horserace.column_names.stages.forEach(function(r,i){var a=[];n.forEach(function(t,e){if(void 0!==t.stages[i]){var n=t.stages[i].replace(/[\s,]/g,""),r=""==n||isNaN(+n)?null:+n;t.index=e,a.push({name:t.name,index:e,score:r})}}),a.sort(function(t,e){return Ea.higher_scores_win?Cs(t.score,e.score):ks(t.score,e.score)});var o=void 0,c=0;a.forEach(function(t){null==t.score?t.rank=null:t.score==o?t.rank=c:t.rank=++c,o=t.score,e=Math.max(e,t.rank)});var s={};a.forEach(function(t){s[t.index]=t}),t.push(s)});var r=n.map(function(e,n){var r=null;return e.ranks=e.stages.map(function(e,r){return t[r][n].rank}),e.line=e.stages.map(function(e,r){return{i:r,value:"ranks"==Ea.value_type?t[r][n].rank:t[r][n].score}}),e.missing_line=e.line.map(function(t,n){return null!==t.value||0===n?null!==t.value&&r?(r=null,t):{i:t.i,value:null}:r?void 0:(r=!0,{i:t.i-1,value:e.line[n-1].value})}).filter(function(t){return void 0!==t}),e.start_circle=e.line.filter(function(t){return null!=t.value})[0],e}).filter(function(t){return t.start_circle});return r.max_rank=e,r}function ca(t){var e=ji(t).tickFormat(function(t){return Sa.horserace.column_names.stages[t]||""}),n=Math.floor(ff/45);To(".x.axis").call(e).selectAll(".tick").selectAll("text").style("text-anchor","start").attr("dx","2.3em").attr("dy","-0.9em").attr("transform","rotate(-45)"),So(".x.axis .tick").size()>n&&(e.ticks(n),To(".x.axis").call(e).selectAll("text").style("text-anchor","start").attr("dx","2.3em").attr("dy","-0.9em").attr("transform","rotate(-45)"))}function sa(t,e,n){var r=Ii(t).tickSize(-e).tickFormat(function(t){return Ea.y_axis_tick_prefix+t+Ea.y_axis_tick_suffix}).tickPadding(10);"ranks"==Ea.value_type&&r.ticks(Sa.horserace.length).tickFormat(function(t){return t%1==0?t:""}),To(".y.axis").transition().duration(n).call(r),"scores"==Ea.value_type&&Ea.y_axis_rounding&&So(".y.axis .tick").size()>pf-bf&&(r.ticks(pf-bf),To(".y.axis").call(r))}function ua(t,e,n,r){ca(t),sa(e,n,r)}function la(){var t;if(!(t=oh[Ea.palette]?oh[Ea.palette]:ch[Ea.palette]?ch[Ea.palette]:Ea.palette.replace(/\s/g,"").split(",")))throw new Error("Unknown color scheme: "+Ea.palette);""!=Ea.custom_colors&&(t=Ea.custom_colors.replace(/\s/g,"").split(",")),eh=function(e){return t[e.unfiltered_index%t.length]}}function fa(t,e){var n=Rf.selectAll(".line-group").data(t,function(t){return t.unfiltered_index}),r=n.enter().append("g").attr("class","horse line-group").on("mouseenter",va).on("mouseleave",xa).on("click",wa).attr("clip-path","url(#clip)").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("fill","none");r.append("path").attr("class","missing"),r.append("path").attr("class","line"),r.append("path").attr("class","shade"),ah=n.merge(r),ah.attr("opacity",ma).attr("stroke",eh),ah.select(".line").transition().duration(e).attr("d",function(t){return lh(t.line)}).attr("opacity",Ea.line_opacity).attr("stroke-width",nh?Math.max(Math.round(Ea.line_width/2),2):Ea.line_width),ah.select(".shade").transition().duration(e).attr("d",function(t){return lh(t.line)}).attr("display",Ea.shade?"block":"none").attr("opacity",Ea.shade_opacity).attr("stroke-width",nh?Math.max(Math.round(Ea.shade_width/2),2):Ea.shade_width),ah.select(".missing").transition().duration(e).attr("d",function(t){return lh(t.missing_line)}).attr("opacity",Ea.missing?Ea.missing_opacity:0).attr("stroke-dasharray",Ea.missing_dash_width+","+Ea.missing_dash_space).attr("stroke-width",nh?Math.max(Math.round(Ea.missing_width/2),2):Ea.missing_width),n.exit().remove()}function ha(t,e){var n=qf.selectAll(".start-circle").data(t,function(t){return t.unfiltered_index}),r=n.enter().append("circle").attr("class","horse start-circle").attr("cy",function(t){return _f(t.start_circle.value)}).attr("cx",function(t){return df(t.start_circle.i)}).attr("clip-path","url(#clip)");n.merge(r).attr("opacity",ma).transition().duration(e).attr("cy",function(t){return _f(t.start_circle.value)}).attr("cx",function(t){return df(t.start_circle.i)}).attr("r",Ea.start_circle_r).attr("fill",eh),n.exit().remove()}function da(t){var e=Math.pow(10,Ea.label_decimals),n=t.line[Math.floor(vf)].value||t.line[_a(t)].value;return""==n?"":Math.round(n*e)/e}function _a(t){for(var e=0,n=Math.floor(vf);n>0;n--)if(null!=t.line[n].value){e=n;break}return e}function pa(t){var e=vf<t.start_circle.i?0:1,n=Math.floor(vf),r=t.line[n].value,i=t.line[n+1]?t.line[n+1].value:null,a=vf-Math.floor(vf),o=Math.floor(vf),c=r;if(null==r||n<t.stages.length&&null==i&&a>0){var s=_a(t);o=s,c=t.line[s].value}else o=vf,c=r+(i-r)*a;return"translate("+df(o)+","+_f(c)+") scale("+e+")"}function ba(){var t=df(1),e=jf.selectAll(".check").data(Sa.horserace.column_names.stages),n=e.enter().append("g").attr("class","check");n.append("rect").attr("class","check-rect"),n.append("line"),n.append("circle");var r=e.merge(n);r.attr("transform",function(e,n){return"translate("+(df(n)-t/2)+", -60)"}).on("mouseenter",function(t){sh=t,To(this).select("line").attr("opacity","1"),To(this).select("circle").attr("opacity","1")}).on("mouseleave",function(){sh=null,To(this).select("line").attr("opacity","0"),To(this).select("circle").attr("opacity","0")}).on("click",function(t,e){Ea.target_position=e+1,Ca()}),r.select("rect").attr("x",0).attr("y",0).attr("height",hf+60).attr("fill",Ea.bg_color).attr("width",t),r.select("line").attr("x1",t/2).attr("x2",t/2).attr("y1",40).attr("y2",hf+60).attr("stroke","#e1e1e1").attr("opacity",function(t){return t==sh?1:0}).style("pointer-events","none"),r.select("circle").attr("r",3).attr("cx",t/2).attr("cy",40).attr("fill","#e1e1e1").attr("opacity",function(t){return t==sh?1:0}).style("pointer-events","none"),e.exit().remove()}function ga(t,e){var n=Yf.selectAll(".labels-group").data(t,function(t){return t.unfiltered_index}),r=n.enter().append("g").attr("class","horse labels-group").on("mouseenter",va).on("mouseleave",xa).on("click",wa).attr("transform",pa);rh=nh?Math.min(Ea.end_circle_r,14):Ea.end_circle_r;var i=nh?Math.min(Ea.end_circle_stroke,2):Ea.end_circle_stroke,a=r.append("g").attr("class","end-circle-container");if(a.append("circle").attr("class","circle bg"),a.append("circle").attr("class","end circle"),a.append("image").attr("clip-path","url(#circleClip)").attr("preserveAspectRatio","xMidYMid slice"),a.append("text").attr("class","rank-number").attr("alignment-baseline","central").attr("fill","white").attr("dominant-baseline","central").attr("text-anchor","middle"),r.append("g").attr("class","name"),r.select(".name").append("text").attr("class","name-bg").attr("alignment-baseline","central").attr("dominant-baseline","central").attr("stroke-width","5px"),r.select(".name").append("text").attr("class","name-fg").attr("alignment-baseline","central").attr("dominant-baseline","central"),r.selectAll(".name-fg, .name-bg").append("tspan").attr("class","name-rank").attr("font-weight","bold"),r.selectAll(".name-fg, .name-bg").append("tspan").attr("class","name-label"),ih=n.merge(r),ih.attr("fill",eh).classed("tied",!1).each(function(t){var e=!1;uh.length>0&&uh.indexOf(String(t.unfiltered_index))>-1&&(e=!0),0==uh.length&&null!=Ea.mouseover_horse&&t.unfiltered_index==Ea.mouseover_horse&&(e=!0),e&&this.parentNode.appendChild(this)}).transition().duration(e).attr("transform",pa),ih.select(".end-circle-container").attr("transform",null),ih.select(".end.circle").attr("r",rh).attr("fill",eh).attr("opacity",ma).attr("stroke-width",i).attr("stroke",Ea.end_circle_stroke_bg?Ea.bg_color:eh),ih.select(".bg.circle").attr("r",rh).attr("fill",Ea.bg_color),ih.select(".name-bg").attr("stroke",Ea.bg_color),Ea.horse_images){var o=2*rh-i/2;ih.select("image").attr("xlink:href",function(t){return t.pic}).style("display","inherit").attr("opacity",ma).transition().duration(e).attr("height",o).attr("width",o).attr("x",-o/2).attr("y",-o/2),Hf.select("#circleClip circle").transition().duration(e).attr("r",rh-i/2)}else ih.select("image").style("display","none");var c=nh?Math.min(Ea.rank_font_size,12):Ea.rank_font_size,s=nh?Math.min(Ea.label_font_size,12):Ea.label_font_size;ih.selectAll(".rank-number").attr("font-size",c).text(function(t){return Ea.rank_outside_picture?"":da(t)+Ea.rank_label_suffix+" "}),ih.select(".name-bg .name-label").text(function(t){return t.name}),ih.select(".name-fg .name-label").text(function(t){return t.name}),ih.select(".name-bg .name-rank").attr("font-size",c).text(function(t){return Ea.rank_outside_picture?da(t)+Ea.rank_label_suffix+" ":""}),ih.select(".name-fg .name-rank").attr("font-size",c).text(function(t){return Ea.rank_outside_picture?da(t)+Ea.rank_label_suffix+" ":""}),ih.selectAll(".name-fg, .name-bg").attr("font-size",s).attr("x",function(){if(nh){var t=this.getBBox().width;return-rh-4-t}return rh+4}).attr("y",0),ih.select(".name-fg").attr("opacity",ma),ih.select(".name-bg").attr("opacity",ma),n.exit().remove()}function ya(t,e){Ai(),fa(t,e),ha(t,e),ga(t,e),ba(t)}function ma(t){return uh.length>0?uh.indexOf(String(t.unfiltered_index))>-1?1:.1:null!=Ea.mouseover_horse?t.unfiltered_index==Ea.mouseover_horse?1:.1:Ea.hide_labels&&(To(this).classed("name-bg")||To(this).classed("name-fg"))?t.unfiltered_index==Ea.mouseover_horse?1:0:1}function va(t,e){t.unfiltered_index!==Ea.mouseover_horse&&(Ea.mouseover_horse=t.unfiltered_index,0==uh.length&&(ih.select(".end.circle").attr("opacity",ma),ih.select("image").attr("opacity",ma),
ih.select(".name-fg").attr("opacity",ma),ih.select(".name-bg").attr("opacity",ma),ih.each(function(t,n){e===n&&this.parentNode.appendChild(this)}),ah.attr("opacity",ma),So(".start-circle").attr("opacity",ma)))}function xa(){if(Ea.mouseover_horse=null,0==uh.length){ih.select(".end.circle").attr("opacity",ma),ih.select("image").attr("opacity",ma),ih.select(".name-fg").attr("opacity",ma),ih.select(".name-bg").attr("opacity",ma),ah.attr("opacity",ma);var t=[];ih.each(function(e){To(this).classed("tied")&&t.push([e.index,this])}),t.sort(function(t,e){return ks(t[0],e[0])}).forEach(function(t){t[1].parentNode.appendChild(t[1])}),So(".start-circle").attr("opacity",ma)}}function wa(t){if(Ea.mouseover_horse=null,xo.stopPropagation(),null==Ea.selected_horse)uh=[String(t.unfiltered_index)];else{uh.indexOf(String(t.unfiltered_index))>-1?uh.length>1?uh.splice(uh.indexOf(String(t.unfiltered_index)),1):uh=[]:uh.push(String(t.unfiltered_index))}Ea.selected_horse=uh.join(),Ca()}function Ma(){var t=Sa.horserace.column_names.stages.length;return null==Ea.target_position?t-1:Math.max(0,Math.min(t-1,Ea.target_position-1))}function ka(){To("body").style("background-color",Ea.bg_color),To("#viz-ui").style("margin-top",Ea.show_buttons||Ea.show_replay?null:0),To("#rank-toggle").style("display",Ea.show_buttons?null:"none").selectAll("button").classed("selected",function(){return To(this).attr("data-type")===("ranks"==Ea.value_type?"ranks":"scores")}),To("#ranks").text(Ea.label_ranks),To("#scores").text(Ea.label_scores),To("#replay").style("display",Ea.show_replay?null:"none").text(Ea.label_replay),$n(),Yn(Ea)}function Ta(){lh.curve(ol[Ea.curve])}function Aa(t){nh=window.innerWidth<=420,ka(),ra();var e=oa();uh=Ea.selected_horse?Ea.selected_horse.split(","):[],Ti(vf,e.max_rank),Ta(),la(),ua(df,_f,ff,0),ya(e,t),vf!=Ma()?Ei():Ci()}function Ca(){Aa(Ea.update_duration)}function Na(){window.onresize=function(){Aa(0)},aa(),Ca()}var Sa={},Ea={margin_top:100,margin_right:80,margin_bottom:0,margin_left:10,bg_color:"#FFFFFF",palette:"flourish_default_1",custom_colors:"",start_circle_r:5,end_circle_r:20,end_circle_stroke:4,end_circle_stroke_bg:!0,horse_images:!0,hide_labels:!1,label_decimals:1,label_font_size:12,rank_font_size:14,rank_outside_picture:!0,rank_label_suffix:"",line_opacity:1,line_width:5,curve:"curveLinear",shade:!0,shade_opacity:.1,shade_width:20,missing:!1,missing_opacity:1,missing_dash_width:.2,missing_dash_space:4,missing_width:1.5,stage_duration:500,update_duration:500,label_ranks:"Ranks",label_scores:"Scores",label_replay:"Replay",value_type:"ranks",higher_scores_win:!0,show_buttons:!0,show_replay:!0,target_position:null,selected_horse:null,mouseover_horse:null,y_axis_min:"",y_axis_max:"",y_axis_min_rank:"",y_axis_max_rank:"",y_axis_rounding:!1,y_axis_tick_prefix:"",y_axis_tick_suffix:"%",header_title:"",header_subtitle:"",header_color:"#333333",header_margin:"10",header_align:"left",filter_control_type:"auto-buttons",filter_width:300,filter_include_all:!0,filter_all_label:"All",filter:null},za="http://www.w3.org/1999/xhtml",Fa={svg:"http://www.w3.org/2000/svg",xhtml:za,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Da=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Fa.hasOwnProperty(e)?{space:Fa[e],local:t}:t},La=function(t){var r=Da(t);return(r.local?n:e)(r)},Ua=function(t){return null==t?r:function(){return this.querySelector(t)}},Pa=function(t){"function"!=typeof t&&(t=Ua(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,c=e[i],s=c.length,u=r[i]=new Array(s),l=0;l<s;++l)(a=c[l])&&(o=t.call(a,a.__data__,l,c))&&("__data__"in a&&(o.__data__=a.__data__),u[l]=o);return new Q(r,this._parents)},Oa=function(t){return null==t?i:function(){return this.querySelectorAll(t)}},Ba=function(t){"function"!=typeof t&&(t=Oa(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,c=e[a],s=c.length,u=0;u<s;++u)(o=c[u])&&(r.push(t.call(o,o.__data__,u,c)),i.push(o));return new Q(r,i)},Ha=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Ra=document.documentElement;if(!Ra.matches){var Ya=Ra.webkitMatchesSelector||Ra.msMatchesSelector||Ra.mozMatchesSelector||Ra.oMatchesSelector;Ha=function(t){return function(){return Ya.call(this,t)}}}}var qa=Ha,ja=function(t){"function"!=typeof t&&(t=qa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],c=o.length,s=r[i]=[],u=0;u<c;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&s.push(a);return new Q(r,this._parents)},Xa=function(t){return new Array(t.length)},Ia=function(){return new Q(this._enter||this._groups.map(Xa),this._parents)};a.prototype={constructor:a,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Va=function(t){return function(){return t}},$a="$",Wa=function(t,e){if(!t)return p=new Array(this.size()),f=-1,this.each(function(t){p[++f]=t}),p;var n=e?c:o,r=this._parents,i=this._groups;"function"!=typeof t&&(t=Va(t));for(var a=i.length,s=new Array(a),u=new Array(a),l=new Array(a),f=0;f<a;++f){var h=r[f],d=i[f],_=d.length,p=t.call(h,h&&h.__data__,f,r),b=p.length,g=u[f]=new Array(b),y=s[f]=new Array(b);n(h,d,g,y,l[f]=new Array(_),p,e);for(var m,v,x=0,w=0;x<b;++x)if(m=g[x]){for(x>=w&&(w=x+1);!(v=y[w])&&++w<b;);m._next=v||null}}return s=new Q(s,r),s._enter=u,s._exit=l,s},Za=function(){return new Q(this._exit||this._groups.map(Xa),this._parents)},Qa=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),c=0;c<a;++c)for(var s,u=e[c],l=n[c],f=u.length,h=o[c]=new Array(f),d=0;d<f;++d)(s=u[d]||l[d])&&(h[d]=s);for(;c<r;++c)o[c]=e[c];return new Q(o,this._parents)},Ja=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},Ga=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=s);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,c=n[a],u=c.length,l=i[a]=new Array(u),f=0;f<u;++f)(o=c[f])&&(l[f]=o);l.sort(e)}return new Q(i,this._parents).order()},Ka=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},to=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},eo=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},no=function(){var t=0;return this.each(function(){++t}),t},ro=function(){return!this.node()},io=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,c=a.length;o<c;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},ao=function(t,e){var n=Da(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?l:u:"function"==typeof e?n.local?_:d:n.local?h:f)(n,e))},oo=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},co=function(t,e,n){return arguments.length>1?this.each((null==e?p:"function"==typeof e?g:b)(t,e,null==n?"":n)):y(this.node(),t)},so=function(t,e){return arguments.length>1?this.each((null==e?m:"function"==typeof e?x:v)(t,e)):this.node()[t]};k.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var uo=function(t,e){var n=w(t+"");if(arguments.length<2){for(var r=M(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?S:e?C:N)(n,e))},lo=function(t){return arguments.length?this.each(null==t?E:("function"==typeof t?F:z)(t)):this.node().textContent},fo=function(t){return arguments.length?this.each(null==t?D:("function"==typeof t?U:L)(t)):this.node().innerHTML},ho=function(){return this.each(P)},_o=function(){return this.each(O)},po=function(t){var e="function"==typeof t?t:La(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},bo=function(t,e){var n="function"==typeof t?t:La(t),r=null==e?B:"function"==typeof e?e:Ua(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},go=function(){return this.each(H)},yo=function(t){return this.select(t?Y:R)},mo=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},vo={},xo=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(vo={mouseenter:"mouseover",mouseleave:"mouseout"})}var wo=function(t,e,n){var r,i,a=X(t+""),o=a.length;{if(!(arguments.length<2)){for(c=e?V:I,null==n&&(n=!1),r=0;r<o;++r)this.each(c(a[r],e,n));return this}var c=this.node().__on;if(c)for(var s,u=0,l=c.length;u<l;++u)for(r=0,s=c[u];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value}},Mo=function(t,e){return this.each(("function"==typeof e?Z:W)(t,e))},ko=[null];Q.prototype=J.prototype={constructor:Q,select:Pa,selectAll:Ba,filter:ja,data:Wa,enter:Ia,exit:Za,merge:Qa,order:Ja,sort:Ga,call:Ka,nodes:to,node:eo,size:no,empty:ro,each:io,attr:ao,style:co,property:so,classed:uo,text:lo,html:fo,raise:ho,lower:_o,append:po,insert:bo,remove:go,clone:yo,datum:mo,on:wo,dispatch:Mo};var To=function(t){return"string"==typeof t?new Q([[document.querySelector(t)]],[document.documentElement]):new Q([[t]],ko)},Ao=function(){for(var t,e=xo;t=e.sourceEvent;)e=t;return e},Co=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},No=function(t){var e=Ao();return e.changedTouches&&(e=e.changedTouches[0]),Co(t,e)},So=function(t){return"string"==typeof t?new Q([document.querySelectorAll(t)],[document.documentElement]):new Q([null==t?[]:t],ko)},Eo={value:function(){}};K.prototype=G.prototype={constructor:K,on:function(t,e){var n,r=this._,i=tt(t+"",r),a=-1,o=i.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=nt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=nt(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=et(r[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new K(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],a=0,n=r.length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var zo,Fo,Do=0,Lo=0,Uo=0,Po=1e3,Oo=0,Bo=0,Ho=0,Ro="object"==typeof performance&&performance.now?performance:Date,Yo="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};at.prototype=ot.prototype={constructor:at,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?rt():+n)+(null==e?0:+e),this._next||Fo===this||(Fo?Fo._next=this:zo=this,Fo=this),this._call=t,this._time=n,ft()},stop:function(){this._call&&(this._call=null,this._time=1/0,ft())}};var qo=function(t,e,n){var r=new at;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},jo=G("start","end","interrupt"),Xo=[],Io=0,Vo=1,$o=2,Wo=3,Zo=4,Qo=5,Jo=6,Go=function(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};pt(t,n,{name:e,index:r,group:i,on:jo,tween:Xo,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Io})},Ko=function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){e=null==e?null:e+"";for(i in a)(n=a[i]).name===e?(r=n.state>$o&&n.state<Qo,n.state=Jo,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}},tc=function(t){return this.each(function(){Ko(this,t)})},ec=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},nc="\\s*([+-]?\\d+)\\s*",rc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ic="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ac=/^#([0-9a-f]{3})$/,oc=/^#([0-9a-f]{6})$/,cc=new RegExp("^rgb\\("+[nc,nc,nc]+"\\)$"),sc=new RegExp("^rgb\\("+[ic,ic,ic]+"\\)$"),uc=new RegExp("^rgba\\("+[nc,nc,nc,rc]+"\\)$"),lc=new RegExp("^rgba\\("+[ic,ic,ic,rc]+"\\)$"),fc=new RegExp("^hsl\\("+[rc,ic,ic]+"\\)$"),hc=new RegExp("^hsla\\("+[rc,ic,ic,rc]+"\\)$"),dc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ec(gt,yt,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),ec(Mt,wt,bt(gt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+kt(this.r)+kt(this.g)+kt(this.b)},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),ec(Nt,Ct,bt(gt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Nt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Nt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Mt(St(t>=240?t-240:t+120,i,r),St(t,i,r),St(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var _c=Math.PI/180,pc=180/Math.PI,bc=.96422,gc=1,yc=.82521,mc=4/29,vc=6/29,xc=3*vc*vc,wc=vc*vc*vc;ec(Ft,zt,bt(gt,{brighter:function(t){return new Ft(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Ft(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=bc*Lt(e),t=gc*Lt(t),n=yc*Lt(n),new Mt(Ut(3.1338561*e-1.6168667*t-.4906146*n),Ut(-.9787684*e+1.9161415*t+.033454*n),Ut(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ec(Ht,Bt,bt(gt,{brighter:function(t){return new Ht(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ht(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Et(this).rgb()}}));var Mc=-.14861,kc=1.78277,Tc=-.29227,Ac=-.90649,Cc=1.97294,Nc=Cc*Ac,Sc=Cc*kc,Ec=kc*Tc-Ac*Mc;ec(qt,Yt,bt(gt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new qt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new qt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*_c,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Mt(255*(e+n*(Mc*r+kc*i)),255*(e+n*(Tc*r+Ac*i)),255*(e+n*(Cc*r)),this.opacity)}}));var zc,Fc,Dc,Lc,Uc=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,c=r<e-1?t[r+2]:2*a-i;return jt((n-r/e)*e,o,i,a,c)}},Pc=function(t){return function(){return t}},Oc=function t(e){function n(t,e){var n=r((t=wt(t)).r,(e=wt(e)).r),i=r(t.g,e.g),a=r(t.b,e.b),o=Wt(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}var r=$t(e);return n.gamma=t,n}(1),Bc=function(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),c=new Array(i);for(n=0;n<i;++n)r=wt(e[n]),a[n]=r.r||0,o[n]=r.g||0,c[n]=r.b||0;return a=t(a),o=t(o),c=t(c),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=c(t),r+""}}}(Uc),Hc=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Vc(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}},Rc=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},Yc=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},qc=function(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=Vc(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},jc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xc=new RegExp(jc.source,"g"),Ic=function(t,e){var n,r,i,a=jc.lastIndex=Xc.lastIndex=0,o=-1,c=[],s=[];for(t+="",e+="";(n=jc.exec(t))&&(r=Xc.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(r=r[0])?c[o]?c[o]+=r:c[++o]=r:(c[++o]=null,s.push({i:o,x:Yc(n,r)})),a=Xc.lastIndex;return a<e.length&&(i=e.slice(a),c[o]?c[o]+=i:c[++o]=i),c.length<2?s[0]?Qt(s[0].x):Zt(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)c[(n=s[r]).i]=n.x(t);return c.join("")})},Vc=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Pc(e):("number"===r?Yc:"string"===r?(n=yt(e))?(e=n,Oc):Ic:e instanceof yt?Oc:e instanceof Date?Rc:Array.isArray(e)?Hc:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?qc:Yc)(t,e)},$c=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},Wc=180/Math.PI,Zc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Qc=function(t,e,n,r,i,a){var o,c,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,s/=c),t*r<e*n&&(t=-t,e=-e,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Wc,skewX:Math.atan(s)*Wc,scaleX:o,scaleY:c}},Jc=Kt(Jt,"px, ","px)","deg)"),Gc=Kt(Gt,", ",")",")");te(Vt);var Kc=te(Wt),ts=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=_t(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?ee:ne)(n,t,e))},es=function(t,e){var n;return("number"==typeof e?Yc:e instanceof yt?Oc:(n=yt(e))?(e=n,Oc):Ic)(t,e)},ns=function(t,e){var n=Da(t),r="transform"===n?Gc:es;return this.attrTween(t,"function"==typeof e?(n.local?ue:se)(n,r,re(this,"attr."+t,e)):null==e?(n.local?ae:ie)(n):(n.local?ce:oe)(n,r,e+""))},rs=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Da(t);return this.tween(n,(r.local?le:fe)(r,e))},is=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?he:de)(e,t)):_t(this.node(),e).delay},as=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?_e:pe)(e,t)):_t(this.node(),e).duration},os=function(t){var e=this._id;return arguments.length?this.each(be(e,t)):_t(this.node(),e).ease},cs=function(t){"function"!=typeof t&&(t=qa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],c=o.length,s=r[i]=[],u=0;u<c;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&s.push(a);return new Ce(r,this._parents,this._name,this._id)},ss=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),c=0;c<a;++c)for(var s,u=e[c],l=n[c],f=u.length,h=o[c]=new Array(f),d=0;d<f;++d)(s=u[d]||l[d])&&(h[d]=s);for(;c<r;++c)o[c]=e[c];return new Ce(o,this._parents,this._name,this._id)},us=function(t,e){var n=this._id;return arguments.length<2?_t(this.node(),n).on.on(t):this.each(ye(n,t,e))},ls=function(){return this.on("end.remove",me(this._id))},fs=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ua(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var c,s,u=r[o],l=u.length,f=a[o]=new Array(l),h=0;h<l;++h)(c=u[h])&&(s=t.call(c,c.__data__,h,u))&&("__data__"in c&&(s.__data__=c.__data__),f[h]=s,Go(f[h],e,n,h,f,_t(c,n)));return new Ce(a,this._parents,e,n)},hs=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Oa(t));for(var r=this._groups,i=r.length,a=[],o=[],c=0;c<i;++c)for(var s,u=r[c],l=u.length,f=0;f<l;++f)if(s=u[f]){for(var h,d=t.call(s,s.__data__,f,u),_=_t(s,n),p=0,b=d.length;p<b;++p)(h=d[p])&&Go(h,e,n,p,d,_);a.push(d),o.push(s)}return new Ce(a,o,e,n)},ds=J.prototype.constructor,_s=function(){return new ds(this._groups,this._parents)},ps=function(t,e,n){var r="transform"==(t+="")?Jc:es;return null==e?this.styleTween(t,ve(t,r)).on("end.style."+t,xe(t)):this.styleTween(t,"function"==typeof e?Me(t,r,re(this,"style."+t,e)):we(t,r,e+""),n)},bs=function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,ke(t,e,null==n?"":n))},gs=function(t){return this.tween("text","function"==typeof t?Ae(re(this,"text",t)):Te(null==t?"":t+""))},ys=function(){for(var t=this._name,e=this._id,n=Se(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,c=r[a],s=c.length,u=0;u<s;++u)if(o=c[u]){var l=_t(o,e);Go(o,t,n,u,c,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ce(r,this._parents,t,n)},ms=0,vs=J.prototype;Ce.prototype=Ne.prototype={constructor:Ce,select:fs,selectAll:hs,filter:cs,merge:ss,selection:_s,transition:ys,call:vs.call,nodes:vs.nodes,node:vs.node,size:vs.size,empty:vs.empty,each:vs.each,on:us,attr:ns,attrTween:rs,style:ps,styleTween:bs,text:gs,remove:ls,tween:ts,delay:is,duration:as,ease:os};var xs=(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),2*Math.PI),ws=(function t(e,n){function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=xs);return r.amplitude=function(e){return t(e,n*xs)},r.period=function(n){return t(e,n)},r}(1,.3),function t(e,n){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=xs);return r.amplitude=function(e){return t(e,n*xs)},r.period=function(n){return t(e,n)},r}(1,.3),function t(e,n){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=xs);return r.amplitude=function(e){return t(e,n*xs)},r.period=function(n){return t(e,n)},r}(1,.3),{time:null,delay:0,duration:250,ease:Ee}),Ms=function(t){var e,n;t instanceof Ce?(e=t._id,t=t._name):(e=Se(),(n=ws).time=rt(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,c=r[a],s=c.length,u=0;u<s;++u)(o=c[u])&&Go(o,t,e,u,c,n||ze(o,e));return new Ce(r,this._parents,t,e)};J.prototype.interrupt=tc,J.prototype.transition=Ms;var ks=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Ts=function(t){return 1===t.length&&(t=Fe(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}(ks),As=Ts.right,Cs=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Ns=Math.sqrt(50),Ss=Math.sqrt(10),Es=Math.sqrt(2),zs=function(t,e,n){var r,i,a,o,c=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=De(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++c<i;)a[c]=(t+c)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++c<i;)a[c]=(t-c)/o;return r&&a.reverse(),a},Fs=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r},Ds=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r},Ls=Math.PI,Us=2*Ls,Ps=Us-1e-6;Ue.prototype=Pe.prototype={constructor:Ue,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,c=n-t,s=r-e,u=a-t,l=o-e,f=u*u+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*c-s*u)>1e-6&&i){var h=n-a,d=r-o,_=c*c+s*s,p=h*h+d*d,b=Math.sqrt(_),g=Math.sqrt(f),y=i*Math.tan((Ls-Math.acos((_+f-p)/(2*b*g)))/2),m=y/g,v=y/b;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*u)+","+(e+m*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>u*d)+","+(this._x1=t+v*c)+","+(this._y1=e+v*s)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n;var o=n*Math.cos(r),c=n*Math.sin(r),s=t+o,u=e+c,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+u:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+s+","+u),n&&(f<0&&(f=f%Us+Us),f>Ps?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-c)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=u):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=Ls)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Os=function(t){return function(){return t}},Bs=Math.abs,Hs=Math.atan2,Rs=Math.cos,Ys=Math.max,qs=Math.min,js=Math.sin,Xs=Math.sqrt,Is=1e-12,Vs=Math.PI,$s=Vs/2,Ws=2*Vs,Zs=function(){function t(){var t,u,l=+e.apply(this,arguments),f=+n.apply(this,arguments),h=a.apply(this,arguments)-$s,d=o.apply(this,arguments)-$s,_=Bs(d-h),p=d>h;if(s||(s=t=Pe()),f<l&&(u=f,f=l,l=u),f>Is)if(_>Ws-Is)s.moveTo(f*Rs(h),f*js(h)),s.arc(0,0,f,h,d,!p),l>Is&&(s.moveTo(l*Rs(d),l*js(d)),s.arc(0,0,l,d,h,p));else{var b,g,y=h,m=d,v=h,x=d,w=_,M=_,k=c.apply(this,arguments)/2,T=k>Is&&(i?+i.apply(this,arguments):Xs(l*l+f*f)),A=qs(Bs(f-l)/2,+r.apply(this,arguments)),C=A,N=A;if(T>Is){var S=Be(T/l*js(k)),E=Be(T/f*js(k));(w-=2*S)>Is?(S*=p?1:-1,v+=S,x-=S):(w=0,v=x=(h+d)/2),(M-=2*E)>Is?(E*=p?1:-1,y+=E,m-=E):(M=0,y=m=(h+d)/2)}var z=f*Rs(y),F=f*js(y),D=l*Rs(x),L=l*js(x);if(A>Is){var U=f*Rs(m),P=f*js(m),O=l*Rs(v),B=l*js(v);if(_<Vs){var H=w>Is?Xe(z,F,O,B,U,P,D,L):[D,L],R=z-H[0],Y=F-H[1],q=U-H[0],j=P-H[1],X=1/js(Oe((R*q+Y*j)/(Xs(R*R+Y*Y)*Xs(q*q+j*j)))/2),I=Xs(H[0]*H[0]+H[1]*H[1]);C=qs(A,(l-I)/(X-1)),N=qs(A,(f-I)/(X+1))}}M>Is?N>Is?(b=Ie(O,B,z,F,f,N,p),g=Ie(U,P,D,L,f,N,p),s.moveTo(b.cx+b.x01,b.cy+b.y01),N<A?s.arc(b.cx,b.cy,N,Hs(b.y01,b.x01),Hs(g.y01,g.x01),!p):(s.arc(b.cx,b.cy,N,Hs(b.y01,b.x01),Hs(b.y11,b.x11),!p),s.arc(0,0,f,Hs(b.cy+b.y11,b.cx+b.x11),Hs(g.cy+g.y11,g.cx+g.x11),!p),s.arc(g.cx,g.cy,N,Hs(g.y11,g.x11),Hs(g.y01,g.x01),!p))):(s.moveTo(z,F),s.arc(0,0,f,y,m,!p)):s.moveTo(z,F),l>Is&&w>Is?C>Is?(b=Ie(D,L,U,P,l,-C,p),g=Ie(z,F,O,B,l,-C,p),s.lineTo(b.cx+b.x01,b.cy+b.y01),C<A?s.arc(b.cx,b.cy,C,Hs(b.y01,b.x01),Hs(g.y01,g.x01),!p):(s.arc(b.cx,b.cy,C,Hs(b.y01,b.x01),Hs(b.y11,b.x11),!p),s.arc(0,0,l,Hs(b.cy+b.y11,b.cx+b.x11),Hs(g.cy+g.y11,g.cx+g.x11),p),s.arc(g.cx,g.cy,C,Hs(g.y11,g.x11),Hs(g.y01,g.x01),!p))):s.arc(0,0,l,x,v,p):s.lineTo(D,L)}else s.moveTo(0,0);if(s.closePath(),t)return s=null,t+""||null}var e=He,n=Re,r=Os(0),i=null,a=Ye,o=qe,c=je,s=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-Vs/2;return[Rs(r)*t,js(r)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:Os(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Os(+e),t):n},t.cornerRadius=function(e){return arguments.length?(r="function"==typeof e?e:Os(+e),t):r},t.padRadius=function(e){
return arguments.length?(i=null==e?null:"function"==typeof e?e:Os(+e),t):i},t.startAngle=function(e){return arguments.length?(a="function"==typeof e?e:Os(+e),t):a},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Os(+e),t):o},t.padAngle=function(e){return arguments.length?(c="function"==typeof e?e:Os(+e),t):c},t.context=function(e){return arguments.length?(s=null==e?null:e,t):s},t};Ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Qs=function(t){return new Ve(t)},Js=function(){function t(t){var c,s,u,l=t.length,f=!1;for(null==i&&(o=a(u=Pe())),c=0;c<=l;++c)!(c<l&&r(s=t[c],c,t))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(s,c,t),+n(s,c,t));if(u)return o=null,u+""||null}var e=$e,n=We,r=Os(!0),i=null,a=Qs,o=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Os(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Os(+e),t):n},t.defined=function(e){return arguments.length?(r="function"==typeof e?e:Os(!!e),t):r},t.curve=function(e){return arguments.length?(a=e,null!=i&&(o=a(i)),t):a},t.context=function(e){return arguments.length?(null==e?i=o=null:o=a(i=e),t):i},t},Gs=function(){function t(t){var e,l,f,h,d,_=t.length,p=!1,b=new Array(_),g=new Array(_);for(null==c&&(u=s(d=Pe())),e=0;e<=_;++e){if(!(e<_&&o(h=t[e],e,t))===p)if(p=!p)l=e,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=e-1;f>=l;--f)u.point(b[f],g[f]);u.lineEnd(),u.areaEnd()}p&&(b[e]=+n(h,e,t),g[e]=+i(h,e,t),u.point(r?+r(h,e,t):b[e],a?+a(h,e,t):g[e]))}if(d)return u=null,d+""||null}function e(){return Js().defined(o).curve(s).context(c)}var n=$e,r=null,i=Os(0),a=We,o=Os(!0),c=null,s=Qs,u=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Os(+e),r=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:Os(+e),t):n},t.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Os(+e),t):r},t.y=function(e){return arguments.length?(i="function"==typeof e?e:Os(+e),a=null,t):i},t.y0=function(e){return arguments.length?(i="function"==typeof e?e:Os(+e),t):i},t.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:Os(+e),t):a},t.lineX0=t.lineY0=function(){return e().x(n).y(i)},t.lineY1=function(){return e().x(n).y(a)},t.lineX1=function(){return e().x(r).y(i)},t.defined=function(e){return arguments.length?(o="function"==typeof e?e:Os(!!e),t):o},t.curve=function(e){return arguments.length?(s=e,null!=c&&(u=s(c)),t):s},t.context=function(e){return arguments.length?(null==e?c=u=null:u=s(c=e),t):c},t},Ks=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},tu=function(t){return t},eu=function(){function t(t){var c,s,u,l,f,h=t.length,d=0,_=new Array(h),p=new Array(h),b=+i.apply(this,arguments),g=Math.min(Ws,Math.max(-Ws,a.apply(this,arguments)-b)),y=Math.min(Math.abs(g)/h,o.apply(this,arguments)),m=y*(g<0?-1:1);for(c=0;c<h;++c)(f=p[_[c]=c]=+e(t[c],c,t))>0&&(d+=f);for(null!=n?_.sort(function(t,e){return n(p[t],p[e])}):null!=r&&_.sort(function(e,n){return r(t[e],t[n])}),c=0,u=d?(g-h*m)/d:0;c<h;++c,b=l)s=_[c],f=p[s],l=b+(f>0?f*u:0)+m,p[s]={data:t[s],index:c,value:f,startAngle:b,endAngle:l,padAngle:y};return p}var e=tu,n=Ks,r=null,i=Os(0),a=Os(Ws),o=Os(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Os(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,r=null,t):n},t.sort=function(e){return arguments.length?(r=e,n=null,t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Os(+e),t):i},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:Os(+e),t):a},t.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:Os(+e),t):o},t},nu=Qe(Qs);Ze.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var ru=function(){return Je(Js().curve(nu))},iu=function(){var t=Gs().curve(nu),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Je(n())},delete t.lineX0,t.lineEndAngle=function(){return Je(r())},delete t.lineX1,t.lineInnerRadius=function(){return Je(i())},delete t.lineY0,t.lineOuterRadius=function(){return Je(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Qe(t)):e()._curve},t},au=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},ou=Array.prototype.slice,cu={draw:function(t,e){var n=Math.sqrt(e/Vs);t.moveTo(n,0),t.arc(0,0,n,0,Ws)}},su={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},uu=Math.sqrt(1/3),lu=2*uu,fu={draw:function(t,e){var n=Math.sqrt(e/lu),r=n*uu;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},hu=Math.sin(Vs/10)/Math.sin(7*Vs/10),du=Math.sin(Ws/10)*hu,_u=-Math.cos(Ws/10)*hu,pu={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=du*n,i=_u*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=Ws*a/5,c=Math.cos(o),s=Math.sin(o);t.lineTo(s*n,-c*n),t.lineTo(c*r-s*i,s*r+c*i)}t.closePath()}},bu={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},gu=Math.sqrt(3),yu={draw:function(t,e){var n=-Math.sqrt(e/(3*gu));t.moveTo(0,2*n),t.lineTo(-gu*n,-n),t.lineTo(gu*n,-n),t.closePath()}},mu=-.5,vu=Math.sqrt(3)/2,xu=1/Math.sqrt(12),wu=3*(xu/2+1),Mu={draw:function(t,e){var n=Math.sqrt(e/wu),r=n/2,i=n*xu,a=r,o=n*xu+n,c=-a,s=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(c,s),t.lineTo(mu*r-vu*i,vu*r+mu*i),t.lineTo(mu*a-vu*o,vu*a+mu*o),t.lineTo(mu*c-vu*s,vu*c+mu*s),t.lineTo(mu*r+vu*i,mu*i-vu*r),t.lineTo(mu*a+vu*o,mu*o-vu*a),t.lineTo(mu*c+vu*s,mu*s-vu*c),t.closePath()}},ku=[cu,su,fu,bu,pu,yu,Mu],Tu=function(){function t(){var t;if(r||(r=t=Pe()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}var e=Os(cu),n=Os(64),r=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:Os(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:Os(+e),t):n},t.context=function(e){return arguments.length?(r=null==e?null:e,t):r},t},Au=function(){};un.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Cu=function(t){return new un(t)};ln.prototype={areaStart:Au,areaEnd:Au,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:sn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Nu=function(t){return new ln(t)};fn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:sn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Su=function(t){return new fn(t)};hn.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,c=e[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+r*o),this._beta*e[s]+(1-this._beta)*(a+r*c));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Eu=function t(e){function n(t){return 1===e?new un(t):new hn(t,e)}return n.beta=function(e){return t(+e)},n}(.85);_n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:dn(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:dn(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zu=function t(e){function n(t){return new _n(t,e)}return n.tension=function(e){return t(+e)},n}(0);pn.prototype={areaStart:Au,areaEnd:Au,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:dn(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Fu=function t(e){function n(t){return new pn(t,e)}return n.tension=function(e){return t(+e)},n}(0);bn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dn(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Du=function t(e){function n(t){return new bn(t,e)}return n.tension=function(e){return t(+e)},n}(0);yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:gn(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Lu=function t(e){function n(t){return e?new yn(t,e):new _n(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);mn.prototype={areaStart:Au,areaEnd:Au,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:gn(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Uu=function t(e){function n(t){return e?new mn(t,e):new pn(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);vn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gn(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Pu=function t(e){function n(t){return e?new vn(t,e):new bn(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);xn.prototype={areaStart:Au,areaEnd:Au,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Ou=function(t){return new xn(t)};An.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Tn(this,this._t0,kn(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Tn(this,kn(this,n=Mn(this,t,e)),n);break;default:Tn(this,this._t0,n=Mn(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Cn.prototype=Object.create(An.prototype)).point=function(t,e){An.prototype.point.call(this,e,t)},Nn.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},zn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Fn(t),i=Fn(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Bu=function(t){return new zn(t)};Dn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Hu,Ru,Yu,qu,ju,Xu,Iu,Vu,$u,Wu=function(t){return new Dn(t,.5)},Zu=function(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],c=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<c;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},Qu=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},Ju=function(){function t(t){var a,o,c=e.apply(this,arguments),s=t.length,u=c.length,l=new Array(u);for(a=0;a<u;++a){for(var f,h=c[a],d=l[a]=new Array(s),_=0;_<s;++_)d[_]=f=[0,+i(t[_],h,_,t)],f.data=t[_];d.key=h}for(a=0,o=n(l);a<u;++a)l[o[a]].index=a;return r(l,o),l}var e=Os([]),n=Qu,r=Zu,i=Pn;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:Os(ou.call(n)),t):e},t.value=function(e){return arguments.length?(i="function"==typeof e?e:Os(+e),t):i},t.order=function(e){return arguments.length?(n=null==e?Qu:"function"==typeof e?e:Os(ou.call(e)),t):n},t.offset=function(e){return arguments.length?(r=null==e?Zu:e,t):r},t},Gu=function(t,e){if((r=t.length)>0){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}Zu(t,e)}},Ku=function(t,e){if((c=t.length)>1)for(var n,r,i,a,o,c,s=0,u=t[e[0]].length;s<u;++s)for(a=o=0,n=0;n<c;++n)(i=(r=t[e[n]][s])[1]-r[0])>=0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):r[0]=a},tl=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var o=0,c=0;o<n;++o)c+=t[o][r][1]||0;i[r][1]+=i[r][0]=-c/2}Zu(t,e)}},el=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var c=0,s=0,u=0;c<i;++c){for(var l=t[e[c]],f=l[o][1]||0,h=l[o-1][1]||0,d=(f-h)/2,_=0;_<c;++_){var p=t[e[_]];d+=(p[o][1]||0)-(p[o-1][1]||0)}s+=f,u+=d*f}n[o-1][1]+=n[o-1][0]=a,s&&(a-=u/s)}n[o-1][1]+=n[o-1][0]=a,Zu(t,e)}},nl=function(t){var e=t.map(On);return Qu(t).sort(function(t,n){return e[t]-e[n]})},rl=function(t){return nl(t).reverse()},il=function(t){var e,n,r=t.length,i=t.map(On),a=Qu(t).sort(function(t,e){return i[e]-i[t]}),o=0,c=0,s=[],u=[];for(e=0;e<r;++e)n=a[e],o<c?(o+=i[n],s.push(n)):(c+=i[n],u.push(n));return u.reverse().concat(s)},al=function(t){return Qu(t).reverse()},ol=Object.freeze({arc:Zs,area:Gs,line:Js,pie:eu,areaRadial:iu,radialArea:iu,lineRadial:ru,radialLine:ru,pointRadial:au,linkHorizontal:an,linkVertical:on,linkRadial:cn,symbol:Tu,symbols:ku,symbolCircle:cu,symbolCross:su,symbolDiamond:fu,symbolSquare:bu,symbolStar:pu,symbolTriangle:yu,symbolWye:Mu,curveBasisClosed:Nu,curveBasisOpen:Su,curveBasis:Cu,curveBundle:Eu,curveCardinalClosed:Fu,curveCardinalOpen:Du,curveCardinal:zu,curveCatmullRomClosed:Uu,curveCatmullRomOpen:Pu,curveCatmullRom:Lu,curveLinearClosed:Ou,curveLinear:Qs,curveMonotoneX:Sn,curveMonotoneY:En,curveNatural:Bu,curveStep:Wu,curveStepAfter:Un,curveStepBefore:Ln,stack:Ju,stackOffsetExpand:Gu,stackOffsetDiverging:Ku,stackOffsetNone:Zu,stackOffsetSilhouette:tl,stackOffsetWiggle:el,stackOrderAscending:nl,stackOrderDescending:rl,stackOrderInsideOut:il,stackOrderNone:Qu,stackOrderReverse:al}),cl={footer_source_label_other:!1,footer_source_label:"Source: ",footer_source_name:"",footer_source_url:"",footer_source_name_2:"",footer_source_url_2:"",footer_source_name_3:"",footer_source_url_3:"",footer_note:"",footer_size:"12",footer_color:"#aaaaaa",footer_align:"left",footer_margin:"10",footer_margin_advanced:!1,footer_margin_top:10,footer_margin_right:10,footer_margin_bottom:0,footer_margin_left:10};Zn.prototype=Qn.prototype={constructor:Zn,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var sl=Qn.prototype;Jn.prototype=Gn.prototype={constructor:Jn,has:sl.has,add:function(t){return t+="",this["$"+t]=t,this},remove:sl.remove,clear:sl.clear,values:sl.keys,size:sl.size,empty:sl.empty,each:sl.each};var ul=Array.prototype,ll=ul.map,fl=ul.slice,hl=function(t){return function(){return t}},dl=function(t){return+t},_l=[0,1],pl=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},bl=function(t){return t=pl(Math.abs(t)),t?t[1]:NaN},gl=function(t,e){return function(n,r){for(var i=n.length,a=[],o=0,c=t[0],s=0;i>0&&c>0&&(s+c+1>r&&(c=Math.max(1,r-s)),a.push(n.substring(i-=c,i+c)),!((s+=c+1)>r));)c=t[o=(o+1)%t.length];return a.reverse().join(e)}},yl=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}},ml=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;or.prototype=cr.prototype,cr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var vl,xl,wl,Ml,kl=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},Tl=function(t,e){var n=pl(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(vl=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+pl(t,Math.max(0,e+a-1))[0]},Al=function(t,e){var n=pl(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Cl={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Al(100*t,e)},r:Al,s:Tl,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Nl=function(t){return t},Sl=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],El=function(t){function e(t){function e(t){var e,i,c,l=g,x=y;if("c"===b)x=m(t)+x,t="";else{t=+t;var w=t<0;if(t=m(Math.abs(t),_),p&&(t=kl(t)),w&&0==+t&&(w=!1),l=(w?"("===u?u:"-":"-"===u||"("===u?"":u)+l,x=("s"===b?Sl[8+vl/3]:"")+x+(w&&"("===u?")":""),v)for(e=-1,i=t.length;++e<i;)if(48>(c=t.charCodeAt(e))||c>57){x=(46===c?a+t.slice(e+1):t.slice(e))+x,t=t.slice(0,e);break}}d&&!f&&(t=r(t,1/0));var M=l.length+t.length+x.length,k=M<h?new Array(h-M+1).join(n):"";switch(d&&f&&(t=r(k+t,k.length?h-x.length:1/0),k=""),s){case"<":t=l+t+x+k;break;case"=":t=l+k+t+x;break;case"^":t=k.slice(0,M=k.length>>1)+l+t+x+k.slice(M);break;default:t=k+l+t+x}return o(t)}t=or(t);var n=t.fill,s=t.align,u=t.sign,l=t.symbol,f=t.zero,h=t.width,d=t.comma,_=t.precision,p=t.trim,b=t.type;"n"===b?(d=!0,b="g"):Cl[b]||(null==_&&(_=12),p=!0,b="g"),(f||"0"===n&&"="===s)&&(f=!0,n="0",s="=");var g="$"===l?i[0]:"#"===l&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",y="$"===l?i[1]:/[%p]/.test(b)?c:"",m=Cl[b],v=/[defgprs%]/.test(b);return _=null==_?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),e.toString=function(){return t+""},e}function n(t,n){var r=e((t=or(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(bl(n)/3))),a=Math.pow(10,-i),o=Sl[8+i/3];return function(t){return r(a*t)+o}}var r=t.grouping&&t.thousands?gl(t.grouping,t.thousands):Nl,i=t.currency,a=t.decimal,o=t.numerals?yl(t.numerals):Nl,c=t.percent||"%";return{format:e,formatPrefix:n}};!function(t){xl=El(t),wl=xl.format,Ml=xl.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var zl=function(t){return Math.max(0,-bl(Math.abs(t)))},Fl=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(bl(e)/3)))-bl(Math.abs(t)))},Dl=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,bl(e)-bl(t))+1},Ll=function(t,e,n){var r,i=t[0],a=t[t.length-1],o=Le(i,a,null==e?10:e);switch(n=or(null==n?",f":n),n.type){case"s":var c=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=Fl(o,c))||(n.precision=r),Ml(n,c);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=Dl(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=zl(o))||(n.precision=r-2*("%"===n.type))}return wl(n)},Ul=new Date,Pl=new Date,Ol=lr(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Ol.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?lr(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Ol:null};var Bl=6e4,Hl=6048e5,Rl=(lr(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),lr(function(t){t.setTime(Math.floor(t/Bl)*Bl)},function(t,e){t.setTime(+t+e*Bl)},function(t,e){return(e-t)/Bl},function(t){return t.getMinutes()}),lr(function(t){var e=t.getTimezoneOffset()*Bl%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),lr(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Bl)/864e5},function(t){return t.getDate()-1})),Yl=fr(0),ql=fr(1),jl=(fr(2),fr(3),fr(4)),Xl=(fr(5),fr(6),lr(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),lr(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Xl.every=function(t){return isFinite(t=Math.floor(t))&&t>0?lr(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Il=(lr(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Bl)},function(t,e){return(e-t)/Bl},function(t){return t.getUTCMinutes()}),lr(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),lr(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1})),Vl=hr(0),$l=hr(1),Wl=(hr(2),hr(3),hr(4)),Zl=(hr(5),hr(6),lr(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),lr(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));Zl.every=function(t){return isFinite(t=Math.floor(t))&&t>0?lr(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var Ql,Jl,Gl,Kl,tf,ef={"-":"",_:" ",0:"0"},nf=/^\s*\d+/,rf=/^%/,af=/[\\^$*+?|[\]().{}]/g;!function(t){Ql=br(t),Jl=Ql.format,Gl=Ql.parse,Kl=Ql.utcFormat,tf=Ql.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var of=(Date.prototype.toISOString||Kl("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||tf("%Y-%m-%dT%H:%M:%S.%LZ"),function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}),cf=of("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),sf=of("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),uf=of("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),lf=of("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");Kc(Yt(300,.5,0),Yt(-240,.5,1));var ff,hf,df,_f,pf,bf,gf,yf,mf,vf=(Kc(Yt(-100,.75,.35),Yt(80,1.5,.8)),Kc(Yt(260,.75,.35),Yt(80,1.5,.8)),Yt(),
0),xf=null,wf=".controls-container {\tdisplay: inline-block;}.controls-container, .controls-container * {\tbox-sizing: border-box;\ttext-align: left;\tvertical-align: bottom;}.button-container .button, .dropdown .current {\toverflow: hidden;\ttext-overflow: ellipsis;\theight: 100%;\twhite-space: nowrap;\ttext-align: left;\tfont-size: 12px;\tline-height: 21px;}.button-container .button, .dropdown .current, .dropdown .list .list-item {\twhite-space: nowrap;}.slider, .slider-play {\tpointer-events: all;\tvertical-align: bottom}.button {\tdisplay: inline-block;\tcursor: pointer}.button:hover {\topacity: .5}.button.selected, .button.selected:hover {\tcolor: #fff;\tcursor: default;\topacity: 1;\tbackground-image: linear-gradient(transparent, rgba(0, 0, 0, .05) 40%, rgba(0, 0, 0, .1))}.button-container {\tpointer-events: all;\twidth: auto;\tline-height: 0;\tmargin-bottom: 18px;\twidth: 100%;\ttext-align: center;}.button-container.button-group {\tdisplay: table;\tborder: 1px solid #ccc;\twidth: 100%;\ttable-layout: fixed;\tborder-radius: 3px;\tmargin-bottom: 20px;\toverflow: hidden;}.button-container .button {\tfont-size: 12px;\tborder: 1px solid #ccc;\tbackground: #fff;\tpadding: 0.1em 0.6em 0;\tcolor: #333;\tfont-weight: 400;\ttext-align: center;\theight: 24px;\tborder-radius: 3px;\tmargin: 0 1px 2px;}.button-container.button-group .button {\tborder: none;\tborder-left: 1px solid #ccc;\tborder-radius: 0;\tdisplay: table-cell;\ttext-align: center;\tvertical-align: middle;\tmargin: 0;\theight: 22px;}.button-container .button:hover {\tbackground: #eee;\topacity: .8}.button-container.button-group .button:first-child {\tborder: none}.button-container .button.selected, .button-container .button.selected:hover {\topacity: 1;\tbackground: #ececec;\tcolor: #333}.dropdown {\tpointer-events: all;\tdisplay: inline-table;\tcolor: #333;\tfont-weight: 400;\tfont-size: 16px;\tposition: relative}.dropdown .heading {\tmargin-bottom: .4em;\tfont-weight: 300}.dropdown .main {\tbackground: #fff;\tpadding: 0 20px 0 6px;\tcursor: pointer;\tposition: relative;\tborder: 1px solid #ccc;\tborder-radius: 3px;\theight: 24px;\tline-height: 26px}.dropdown .list, .dropdown .symbol {\tposition: absolute}.dropdown .current {\theight: 100%;\twidth: 100%;\tdisplay: inline-block;\tvertical-align: top;\tpadding: 0.1em 0 0;}.dropdown .symbol {\twidth: 30px;\theight: 100%;\tright: 0;\ttop: 0;\tbackground: 80% 40% no-repeat;\tbackground-size: auto 50%;\tdisplay: inline-block}.dropdown .list {\ttop: 100%;\tleft: 2px;\tmin-width: calc(100% - 4px);\tbackground: rgba(255, 255, 255, 1);\tpadding: 0 2px;\ttext-align: left;\tdisplay: none;\tline-height: 1.4em;\tmax-height: 160px;\toverflow-y: scroll;\tcolor: #333;\tbox-shadow: 0 1px 2px rgba(0, 0, 0, .2)}.dropdown .list .list-item {\tfont-size: 12px;\theight: 24px;\tpadding: 0 5px}.dropdown .list .list-item:hover {\tcursor: pointer;\tbackground: #eee}.dropdown.open .list {\tdisplay: block;\tz-index: 1}.dropdown .list .list-item.selected, .dropdown .list .list-item.selected:hover {\tcolor: #57c1fc;\tcursor: default;\topacity: 1}.dropdown .list .list-item.header, .dropdown .list .list-item.header:hover {\tfont-size: .66em;\tletter-spacing: 1px;\ttext-transform: uppercase;\tcolor: #888;\topacity: 1;\tcursor: default;\tfont-weight: 300;\tmargin-top: .5em}.dropdown .list .list-item.header:first-child {\tmargin-top: 0}.controls-container .dropdown {\tmargin: 0 0 20px;}.controls-container .dropdown .heading {\tcolor: #333}.slider-holder {\tmargin-bottom: 20px}.slider-play {\twidth: 24px;\theight: 24px;\tbackground-repeat: no-repeat;\tbackground-size: 100% 100%;\tbackground-position: center;\tcursor: pointer;\tdisplay: none;\tmargin-right: 2px}.slider, .slider-holder.animatable .slider-play {\tdisplay: inline-block}.slider-play:hover {\topacity: .7}.slider {\theight: 46px;\twidth: 100%;\tbottom: 0}.slider-holder.animatable .slider {\twidth: calc(100% - 37px)}.slider-holder.playing .slider {\tpointer-events: none}.slider .tick line {\tstroke: #333}.slider text {\tfill: #333}.slider .slider-end-labels {\tfont-size: 11px;\tfill: #9e9e9e}@media(min-width:520px) {\t.dropdown .main {\t\theight: 30px;\t}\t.slider-play {\t\twidth: 30px;\t\theight: 30px\t}\t.button-container .button, .dropdown .current {\t\tfont-size: 14px;\t\tline-height: 26px;\t\theight: 30px;\t}\t.button-container.button-group .button {\t\theight: 28px;\t}\t.dropdown .list .list-item {\t\theight: 30px;\t\tfont-size: 14px;\t\tline-height: 27px;\t}}",Mf=!1,kf=Object.freeze(["auto-buttons","grouped-buttons","floating-buttons","dropdown","slider","none"]),Tf=Array.prototype.slice,Af=function(t){return t},Cf=1,Nf=2,Sf=3,Ef=4,zf=1e-6,Ff=new Vi;for(var Df in Ff)!function(t){t.length>0&&"_"==t.charAt(0)&&(Vi.prototype[t.substr(1)]=function(e){return void 0===e?this[t]:(this[t]=e,this)})}(Df);Vi.prototype.margin=function(t){if(!t)return this._margin;for(Df in t){if(!(Df in this._margin))throw"Slider.margin: unrecognised option "+Df;this._margin[Df]=t[Df]}return this},Vi.prototype.on=function(t,e){if(!(t in this.handlers))throw"Slider.on: No such event: "+t;return this.handlers[t].push(e),this},Vi.prototype.fire=function(t,e){if(!(t in this.handlers))throw"Slider.fire: No such event: "+t;for(var n=this.handlers[t],r=0;r<n.length;r++)n[r].call(this,e);return this},Vi.prototype.draw=function(){function t(t){document.addEventListener("mouseup",e,!1),document.addEventListener("mousemove",n,!1),C=t.clientX,N=c.scale(c._value)}function e(){document.removeEventListener("mouseup",e,!1),document.removeEventListener("mousemove",n,!1)}function n(t){o(t.clientX-C)}function r(t){1==t.touches.length&&(document.addEventListener("touchend",i,!1),document.addEventListener("touchmove",a,!1),C=t.touches[0].clientX,N=c.scale(c._value))}function i(){document.removeEventListener("touchend",i,!1),document.removeEventListener("touchmove",a,!1)}function a(t){1==t.touches.length&&o(t.touches[0].clientX-C)}function o(t){var e=N+t,n=Math.max(0,Math.min(b,e)),r=c.scale.invert(n);c._snap&&(r=Wi(c._snap,r)),A.attr("cx",c.scale(r)),r!=c._value&&(c._value=r,c.fire("change",c._value))}var c=this,s=this._width,u=this._height,l=this.container.node();if(!s){var f=l.getBoundingClientRect();if(!f||0==f.width)return this;s=f.width,u=f.height}var h=null==this._channelRadius?this._channelHeight/2:this._channelRadius,d=null==this._margin.left?Math.max(this._handleRadius,h):this._margin.left,_=null==this._margin.right?Math.max(this._handleRadius,h):this._margin.right,p=null==this._margin.top?Math.max(this._handleRadius,this._channelHeight/2):this._margin.top,b=s-d-_,g=b+2*h,y=1.5*this._labelSize;null!=this._label&&null==this._margin.top&&(p+=y);var m;"http://www.w3.org/2000/svg"==l.namespaceURI?m=this.container:(m=this.container.selectAll("svg").data([{width:s,height:u}]),m.exit().remove(),m=m.enter().append("svg").merge(m),m.attr("width",function(t){return t.width}).attr("height",function(t){return t.height}));var v=m.selectAll("g.slider-container").data([{left:d,top:p,id:this._id}]);v.exit().remove(),v=v.enter().append("g").attr("class","slider-container").merge(v),v.attr("transform",function(t){return"translate("+t.left+","+t.top+")"}).attr("id",function(t){return t.id}),this.scale=(this._scale?this._scale():ur()).domain(this._domain).range([0,b]),null==this._value||this._value<this._domain[0]?this._value=this._domain[0]:this._value>this._domain[1]&&(this._value=this._domain[1]),this._snap&&(this._value=Wi(this._snap,this._value));var x=[];if(this._axis){var w;w="boolean"!=typeof this._axis?this._axis(this.scale):Xi().scale(this.scale).tickPadding(6),this._ticks&&w.ticks(this._ticks),this._tickFormat&&w.tickFormat(this._tickFormat),this._tickSize?w.tickSize(this._tickSize):w.tickSize(Math.max(5,this._handleRadius-this._channelHeight-2)),x.push(w)}var M=v.selectAll(".slider-axis"),k=M.data(x).enter();k.append("g").attr("class","slider-axis").attr("transform","translate(0,"+this._channelHeight/2+")").each(function(t){t(To(this))}),k.select(".domain").attr("fill","none"),k.selectAll(".tick line").attr("stroke","black"),k.exit().remove();var T,A;T=v.selectAll(".slider-channel").data([{width:g,height:this._channelHeight,channel_r:h}]),T.exit().remove(),T=T.enter().append("rect").attr("class","slider-channel").attr("fill",this._channelFill).attr("cursor","pointer").on("click",function(){var t=Math.max(0,Math.min(b,No(this)[0]));c._value=c.scale.invert(t),c._snap&&(c._value=Wi(c._snap,c._value)),A.attr("cx",c.scale(c._value)),c.fire("change",c._value)}).merge(T),T.attr("width",function(t){return t.width}).attr("height",function(t){return t.height}).attr("y",function(t){return-t.height/2}).attr("x",function(t){return-t.channel_r}).attr("rx",function(t){return t.channel_r});var C,N;A=v.selectAll(".slider-handle").data([{v:this._value,x:this.scale(this._value)}]),A=A.enter().append("circle").attr("class","slider-handle").attr("cursor","col-resize").merge(A),A.attr("cx",function(t){return t.x}).attr("r",this._handleRadius).attr("fill",this._handleFill).on("mousedown",function(){xo.preventDefault(),t(xo)}).on("touchstart",function(){xo.preventDefault(),r(xo)});var S=[];this._label&&S.push({label:this._label,x:b/2,y:-y,font_size:this._labelSize});var E=v.selectAll(".slider-label").data(S);E.exit().remove(),E=E.enter().append("text").attr("class","slider-label").attr("text-anchor","middle").attr("cursor","default").merge(E),E.text(function(t){return t.label}).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("font-size",this._labelSize);var z=[];this._startLabel&&z.push({label:this._startLabel,x:this._startLabelBelow?0:-(h+5+Math.max(0,this._handleRadius-h)),y:this._startLabelBelow?h+15:this._startEndLabelSize/1.75-h/2,anchor:this._startLabelBelow?"middle":"end",font_size:this._startEndLabelSize}),this._endLabel&&z.push({label:this._endLabel,x:this._endLabelBelow?b:b+(h+Math.max(0,this._handleRadius-h)+5),y:this._startLabelBelow?h+15:this._startEndLabelSize/1.75-h/2,anchor:this._endLabelBelow?"middle":"start",font_size:this._startEndLabelSize});var F=v.selectAll(".slider-end-labels").data(z);return F.exit().remove(),F=F.enter().append("text").attr("class","slider-end-labels").attr("pointer-events","none").merge(F),F.text(function(t){return t.label}).attr("font-size",function(t){return t.font_size}).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("text-anchor",function(t){return t.anchor}),this},Vi.prototype.update=Vi.prototype.draw,Zi.version="1.3.1";var Lf,Uf,Pf,Of,Bf,Hf,Rf,Yf,qf,jf,Xf,If=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n};If("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Vf=If("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),$f=If("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Wf=If("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Zf=If("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Qf=If("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Jf=If("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Gf=If("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Kf=If("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),th=function(t){return Bc(t[t.length-1])};th(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(If)),th(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(If)),th(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(If)),th(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(If)),th(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(If)),th(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(If)),th(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(If)),th(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(If)),th(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(If)),th(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(If)),th(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(If)),th(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(If)),th(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(If)),th(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(If)),th(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(If)),th(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(If)),th(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(If)),th(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(If)),th(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(If)),th(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(If)),th(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(If)),th(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(If)),th(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(If)),th(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(If)),th(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(If)),th(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(If)),th(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(If)),Kc(Yt(300,.5,0),Yt(-240,.5,1));var eh,nh,rh,ih,ah,oh=(Kc(Yt(-100,.75,.35),Yt(80,1.5,.8)),Kc(Yt(260,.75,.35),Yt(80,1.5,.8)),Yt(),wt(),Math.PI,Math.PI,{schemeCategory10:cf,schemeCategory20:lf,schemeCategory20b:sf,schemeCategory20c:uf,schemeAccent:Vf,schemeDark2:$f,schemePaired:Wf,schemePastel1:Zf,schemePastel2:Qf,schemeSet1:Jf,schemeSet2:Gf,schemeSet3:Kf}),ch={flourish_default_1:["#1D6996","#EDAD08","#73AF48","#94346E","#38A6A5","#E17C05","#5F4690","#0F8554","#6F4070","#CC503E","#994E95","#666666"],flourish_default_2:["#11A579","#CC503E","#3969AC","#F2B701","#7F3C8D","#80BA5A","#E68310","#CF1C90","#008695","#F97B72","#4B4B8F","#A5AA99"],carto_rainbow:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#6F4070","#994E95","#666666"],carto_pastel:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"],carto_antique:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#8C785D","#467378","#7C7C7C"]},sh=null,uh=[],lh=Js().x(function(t){return df(t.i)}).y(function(t){return _f(t.value)}).defined(function(t){return null!=t.value});t.data=Sa,t.state=Ea,t.draw=Na,t.update=Ca}(this.template=this.template||{});
//# sourceMappingURL=template.js.map
</script><script>
var path = document.location.href.match(/\/visualisation\/(\d+)/);
if (path) {
	path = path[0];
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	ga("create", "UA-44635456-19", "auto", { storage: "none" });
	ga("set", "transport", "beacon");
	ga("set", "dimension1", path.substr(1));
	ga("set", "dimension2", new Date().toISOString());
	ga("send", "pageview", path);
}</script><script src="embedded.js"></script><script>
		function _Flourish_unflattenInto(dest, src) {
			dest = dest || {};
			for (var k in src) {
				var t = dest;
				for (var i = k.indexOf("."), p = 0; i >= 0; i = k.indexOf(".", p = i+1)) {
					var s = k.substring(p, i);
					if (!(s in t)) t[s] = {};
					t = t[s];
				}
				t[k.substring(p)] = src[k];
			}
			return dest;
		}
		var _Flourish_settings = {"curve":"curveStep","higher_scores_win":true,"line_width":6,"palette":"flourish_default_2","show_buttons":true,"show_replay":true,"value_type":"scores","y_axis_max":3000,"y_axis_min":1,"y_axis_rounding":false};
		_Flourish_unflattenInto(window.template.state, _Flourish_settings);

		var _Flourish_data_column_names = {"horserace":{"name":"name","pic":"pic","stages":["2007","2008","2009","2010","2011","2012","2013","2014","2015","2016",""]}},
				_Flourish_data = {"horserace":[{"name":"杨惠妍","pic":"http://img.zcool.cn/community/01e77f55433ea70000019ae940347e.jpg@1280w_1l_2o_100sh.jpg","stages":["1211.5","151","266.3","234","287.7","277.2","439.2","299.9","323.9","70","1370.3"]},{"name":"刘永行","pic":"http://hiphotos.baidu.com/doc/pic/item/42166d224f4a20a42b94c8da9c529822720ed021.jpg","stages":["180.8","204","375.5","327","421.9","365.4","372.1","397.8","355.6","67","423.7"]},{"name":"王传福","pic":"http://bjcb.morningpost.com.cn/res/1/1/2013-07/19/S43/res01_attpic_brief.jpg","stages":["97.5","72.1","396","284","97.2","76.9","219.6","287.6","349.3","49.5","370.7"]},{"name":"宗庆后","pic":"http://www.ebusinessreview.cn/upload/zongqinghou.jpg","stages":["75","88.4","327.7","534","415.5","630","683.2","673.2","463.6","74","602.4"]},{"name":"梁稳根","pic":"http://photocdn.sohu.com/20121212/Img360154630.jpg","stages":["196.5","65.6","211.6","394","594.5","371.7","305","315","278","33","278"]},{"name":"王健林","pic":"http://img0.imgtn.bdimg.com/it/u=3003491060,1411632622&fm=214&gp=0.jpg","stages":["40","57.1","239","260","255.7","504","860.1","807.8","1905","330","1668.2"]},{"name":"马云","pic":"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1531991945602&di=11f5c1aa3d35d6e843158264169cd420&imgtype=0&src=http%3A%2F%2Fwanzao2.b0.upaiyun.com%2Fsystem%2Fpictures%2F38625130%2Foriginal%2F1474080746_1496x1536.jpg","stages":["67.5","42.2","79","121.5","42.2","214.2","433.1","1934.4","1384.3","282","2555.3"]},{"name":"许家印","pic":"http://img1.cache.netease.com/catchpic/0/03/037BF5F389CDC64EA68D0B31C96E2559.jpg","stages":["97.5","30","62.8","280","396.4","308.7","329.4","361.1","552.5","98","2813.5"]}]};
		for (var _Flourish_dataset in _Flourish_data) {
				window.template.data[_Flourish_dataset] = _Flourish_data[_Flourish_dataset];
				window.template.data[_Flourish_dataset].column_names = _Flourish_data_column_names[_Flourish_dataset];
		}
		window.template.draw();
	</script></body></html>
